!function(t){var e={};function r(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=41)}([function(t,e,r){"use strict";e.a=function(t){return Array.isArray(t)}},function(t,e,r){"use strict";e.a=function(t){return!Array.isArray(t)&&"object"==typeof t&&t}},function(t,e,r){"use strict";var n=r(32);e.a=function(t){return Object(n.a)(t)||t&&"[object function]"==={}.toString.call(t)}},function(t,e,r){"use strict";var n=r(0),a=r(4),s=r(7),i=r(10),o=r(8),l=r(1);e.a=function(t){return Object(n.a)(t)?t:!1!==t&&0!==t&&function(t){return Object(i.a)(t)||Object(s.a)(t)||!1===t||0===t||Object(o.a)(t)&&!Object.keys(t).length}(t)?[]:function(t){return!Object(a.a)(t)&&!Object(s.a)(t.length)}(t)?Array.prototype.slice.call(t):Object(l.a)(t)?Object.values(t):[t]}},function(t,e,r){"use strict";e.a=function(t){return"string"==typeof t}},function(t,e,r){"use strict";e.a=function(t){return!0!==t&&!1!==t&&null!==t&&""!==t&&!isNaN(1*t)}},function(t,e,r){"use strict";var n=r(8),a=r(5);e.a=function(t,e){var r=void 0;return Object(n.a)(t)&&Object.keys(t).forEach(n=>{!1!==r&&(r=e(Object(a.a)(n)?parseFloat(n):n,t[n]))}),r}},function(t,e,r){"use strict";e.a=function(t){return arguments.length&&(void 0===t||void 0===t)}},function(t,e,r){"use strict";e.a=function(t){return Array.isArray(t)||"object"==typeof t}},function(t,e,r){"use strict";var n=r(0),a=r(4);e.a=function(t,e=null){var r={};return 2===arguments.length&&(Object(a.a)(t)?r[t]=e:Object(n.a)(t)&&Object(n.a)(e)&&t.forEach((t,n)=>r[t]=e[n])),r}},function(t,e,r){"use strict";e.a=function(t){return null===t||""===t}},function(t,e,r){"use strict";var n=r(0),a=r(2),s=r(5),i=r(8),o=r(14);e.a=function(t,e=[]){var r=0;return Object(s.a)(arguments[0])&&Object(i.a)(arguments[1])&&(r=arguments[0],t=arguments[1],e=arguments[2]||[]),Object(o.a)([r,{},t],(t,r,s)=>Object(a.a)(e)?e(t):!Object(n.a)(e)||!e.length||e.indexOf(t)>-1,!1,!1,!1)}},function(t,e,r){"use strict";var n=r(1),a=r(9),s=r(20);e.a=function(t,e,r=null){return Object(s.a)(t,Object(n.a)(e)?e:Object(a.a)(e,r))}},function(t,e,r){"use strict";e.a=function(t,e=1){var r=0;t.forEach(t=>{r++});var n=t.slice(t.length-r,e);return arguments.length>1?n:n[0]}},function(t,e,r){"use strict";var n=r(0),a=r(2),s=r(1),i=r(8),o=r(5),l=r(19),c=function(t,e){var r=[];return function(t,e){e=(e=e||Object.prototype)&&!Object(n.a)(e)?[e]:e;var r=[];for(t=t;t&&(!e||e.indexOf(t)<0)&&"default"!==t.name;)r.push(t),t=t?Object.getPrototypeOf(t):null;return r}(t,e).forEach(t=>{Object(l.a)(r,...Object.getOwnPropertyNames(t))}),r},h=e.a=function(t,e,r=!1,l=!1,p=!1){var u=0,f=t.shift();if((Object(o.a)(f)||!0===f||!1===f)&&(u=f,f=t.shift()),!t.length)throw new Error("_merge() requires two or more array/objects.");return t.forEach((t,d)=>{(Object(i.a)(t)||Object(a.a)(t))&&(r?c(t):Object.getOwnPropertyNames(t)).forEach(a=>{var i=f[a],c=t[a];if((Object(n.a)(i)&&Object(n.a)(c)||Object(s.a)(i)&&Object(s.a)(c))&&(!0===u||u>0))f[a]=Object(n.a)(i)&&Object(n.a)(c)?[]:{},h([Object(o.a)(u)?u-1:u,f[a],i,c],e,r,l);else if(e(a,f,t,d))if(Object(n.a)(f)&&Object(n.a)(t))l?f[a]=c:f.push(c);else if(p)Object.defineProperty(f,a,Object.getOwnPropertyDescriptor(t,a));else try{f[a]=t[a]}catch(t){}})}),f}},function(t,e,r){"use strict";var n=r(0),a=r(1),s=r(5);const i=function(t,e=1,r=!0){return!Object(s.a)(e)||e<=0?t:(!Object(n.a)(t)&&Object(a.a)(t)&&r&&(t=Object.values(t)),Object(n.a)(t)?t.reduce((t,s)=>Object(n.a)(s)||Object(a.a)(s)&&r?t.concat(i(Object(n.a)(s)?s:Object.values(s),e-1,r)):t.concat(s),[]):t)};e.a=i},function(t,e,r){"use strict";var n=r(21),a=r(8),s=r(7),i=r(10),o=r(3);e.a=function(t,e,r={},l=!0){e=Object(o.a)(e).slice();for(var c=t;!Object(s.a)(c)&&!Object(i.a)(c)&&e.length;){var h=e.shift(),p=l&&Object(n.a)(c);if(!(p?c.get(h):Object(a.a)(c)?h in c:c[h]))return void(r.exists=!1);c=p?c.get(h):c[h]}return r.exists=!0,c}},function(t,e,r){"use strict";e.a=function(t,e,r=!1){for(var n=t.indexOf(e);n>-1&&(r||!1===r);)t.splice(n,1),r>0&&r--,n=t.indexOf(e);return t}},function(t,e,r){"use strict";var n=r(0),a=r(1),s=r(2),i=r(8),o=r(30),l=r(6);const c=function(t,e,r=!0,h=1){if(Object(n.a)(t)&&Object(n.a)(e)&&t.length!==e.length||Object(a.a)(t)&&Object(a.a)(e)&&Object.keys(t).length!==Object.keys(e).length)return!1;var p=function(t,e,r=!0,s=!0,c=!1,h=!1){if(Object(n.a)(t)&&Object(n.a)(e)){var p=[],u=!0;return t.forEach(t=>{if(u){var f=!1;Object(l.a)(e,(e,o)=>{(!f||s&&Object(i.a)(t))&&(f=r(t,o),(Object(n.a)(f)&&!f.length||Object(a.a)(f)&&!Object.keys(f).length)&&(f=!1),Object(i.a)(f)&&s&&(t=f))}),Object(i.a)(f)?p.push(s?f:t):Object(o.a)(f)?c&&!f||!c&&f?p.push(t):h&&(u=!1):p.push(f)}}),p}if(Object(a.a)(t)&&Object(a.a)(e)){p={},u=!0;return Object.keys(t).forEach(l=>{if(u){var f=r(t[l],e[l]);(Object(n.a)(f)&&!f.length||Object(a.a)(f)&&!Object.keys(f).length)&&(f=!1),Object(i.a)(f)?p[l]=s?f:t[l]:Object(o.a)(f)?c&&!f||!c&&f?p[l]=t[l]:h&&(u=!1):p[l]=f}}),p}}(t,e,(t,e)=>h>0&&(Object(n.a)(t)&&Object(n.a)(e)||Object(a.a)(t)&&Object(a.a)(e))?c(t,e,r,h-1):Object(s.a)(r)?r(t,e):t===e===r,!1,!1,!0);return Object(n.a)(p)?p.length===t.length:Object(a.a)(p)?Object.keys(p).length===Object.keys(t).length:p};e.a=c},function(t,e,r){"use strict";e.a=function(t,...e){return e.forEach(e=>{t.indexOf(e)<0&&t.push(e)}),t}},function(t,e,r){"use strict";var n=r(14);e.a=function(...t){return Object(n.a)(t,(t,e,r)=>!0)}},function(t,e,r){"use strict";var n=r(35),a=r(2),s=r(1);e.a=function(t){return Object(s.a)(t)&&Object(n.a)(["observe","unobserve","get","set","has","del"],e=>Object(a.a)(t[e]))}},function(t,e,r){"use strict";var n=r(37),a=r(26),s=r(28);const i=class extends s.b{constructor(t={},e={}){super(t,Object(a.a)({},e,i.params))}static use(t,...e){var r,a;if(r=i.registry[t])return r.singletonInstance?r.singletonInstance:(a=Object(n.a)(r.component)?new r.component(...e):r.component(...e),r.singleton&&(r.singletonInstance=a),a);throw new Error('The "'+t+'" component is undefined!')}static register(t,e,r=!1){i.registry[t]={component:e,singleton:r}}};i.registry={},i.params={},e.a=i},function(t,e,r){"use strict";e.a=function(t){return t.filter((t,e,r)=>r.indexOf(t)===e)}},function(t,e,r){"use strict";var n=r(0);e.a=function(t,e,r=null){return Object(n.a)(e)?t.filter(t=>r?e.filter(e=>r(t,e)).length:-1!==e.indexOf(t)):[]}},function(t,e,r){"use strict";var n=r(1);e.a=function(t){return Object(n.a)(t)&&t.__proxyTargetByCommons||!1}},function(t,e,r){"use strict";var n=r(0),a=r(14);e.a=function(...t){return Object(a.a)(t,(t,e,r)=>{if(Object(n.a)(e)&&Object(n.a)(r)){if(-1===e.indexOf(r[t]))return!0}else if(!(t in e))return!0})}},function(t,e,r){"use strict";e.a=function(t){return"number"==typeof t}},function(t,e,r){"use strict";var n=r(10),a=r(4),s=r(0),i=r(1),o=r(27),l=r(5),c=r(2),h=r(21),p=r(29),u=r(25),f=r(20),d=r(3),m=r(23),b=r(26),g=r(11),v=r(6),O=r(18),j=r(16),w=r(17),y=r(19),x=function(t,...e){return e.forEach(e=>{e.forEach(r=>Object(y.a)(t,...Object(d.a)(e)))}),t},$=r(34),C=(r(24),r(31));var E=class{constructor(t){this.$={propagationStopped:!1,defaultPrevented:!1,promisesInstance:null,promises:[]},Object(v.a)(t,(t,e)=>{this[t]=e})}stopPropagation(){this.$.propagationStopped=!0}get propagationStopped(){return this.$.propagationStopped}preventDefault(){this.$.defaultPrevented=!0}get defaultPrevented(){return this.$.defaultPrevented}promise(t){if(!(t instanceof Promise))throw new Error("Event.promise() must be called with a Promise.");this.$.promises.push(t),this.$.promisesInstance=null}get promises(){return!this.$.promisesInstance&&this.$.promises.length&&(this.$.promisesInstance=Promise.all(this.$.promises)),this.$.promisesInstance}};var k=class{constructor(){this.$={listeners:[]}}addListener(t,e,r={},n=null){if(Object(c.a)(t)&&(n=arguments.length>2?r:"",r=e,e=t,t=null),!Object(c.a)(e))throw new Error('Callback must be a function; "'+typeof e+'" given!');var a={eventNames:t,callback:e,params:r,tag:n,remove:()=>{Object(w.a)(this.$.listeners,a)}};return this.$.listeners.push(a),a}removeListener(t,e=null,r={},a=null){Object(c.a)(t)&&(a=arguments.length>2?r:"",r=e||{},e=t,t=null);for(var s=!1,i=0;i<this.$.listeners.length;i++)!Object(n.a)(t)&&!Object(O.a)(Object(d.a)(this.$.listeners[i].eventNames),Object(d.a)(t))||!Object(n.a)(e)&&this.$.listeners[i].callback!==e||!Object(n.a)(r)&&!Object(O.a)(this.$.listeners[i].params,r)||!Object(n.a)(a)&&this.$.listeners[i].tag!==a||(this.$.listeners[i].removeCallback&&this.$.listeners[i].removeCallback(),this.$.listeners[i].remove(),s=!0);return s}eventsAll(){var t=[];return(this.$.listeners||[]).forEach(e=>{Object(n.a)(e.eventNames)||(t=x(t,Object(d.a)(e.eventNames)))}),t}fire(t,e){var r=e instanceof E?e:new E(e);t=Object(d.a)(t),this.$.currentlyFiring=this.$.currentlyFiring||[];var n=Object($.a)(t,this.$.currentlyFiring);if(n.length){x(this.$.currentlyFiring,n);for(var a=0;a<(this.$.listeners||[]).length;a++)if(!r.propagationStopped){var s=this.$.listeners[a],i=s.params||{},o=Object(d.a)(s.eventNames).map(t=>t.replace(/\`/g,""));if((o.length?o.filter(t=>(r.bubbling&&t.indexOf(".")>-1?r.bubbling:!r.bubbling||i.allowBubbling?n:[]).filter(e=>(t+".").startsWith(e+".")).length).length:!r.bubbling||i.allowBubbling)&&this._shouldFire(s,t,r)){var l,c=this._doFire(s,t,r);!1===c||c instanceof E&&c.propagationStopped?r.stopPropagation():!1===c||c instanceof E&&c.defaultPrevented?r.preventDefault():(c instanceof Promise&&(l=c)||c instanceof E&&(l=c.promises))&&r.promise(l)}}return Object(C.a)(this.$.currentlyFiring,...n),r}}_shouldFire(t,e,r){return!0}_doFire(t,e,r){var i=r.context||{},o=r._context||{};if(!Object(n.a)(t.eventNames)){var l=[],c=[];Object(d.a)(t.eventNames).forEach(t=>{t=Object(a.a)(t)?t.split("."):t,l.push(Object(j.a)(i,t)),c.push(Object(j.a)(o,t))});return Object(s.a)(t.eventNames)?t.callback(l,c,r):t.callback(l[0],c[0],r)}l={},c={};return e.forEach(t=>{var e=Object(a.a)(t)?t.split("."):t;l[t]=Object(j.a)(i,e),c[t]=Object(j.a)(o,e)}),t.callback(l,c,r)}};const S=class extends k{constructor(t={},e={}){super(),this.$.params=Object(b.a)({},e,S.params),this.$.bubblers={},this.$.state=t,this.$._state=Object(s.a)(t)?t.slice():Object(g.a)(1,t),Object(v.a)(this.$.state,(t,e)=>{this._incoming(t,e)})}observe(...t){return this.addListener(...t)}unobserve(...t){return this.removeListener(...t)}set(t,e){var r={};Object(a.a)(t)||Object(o.a)(t)?r[t]=e:Object(s.a)(t)?t.forEach(t=>{r[t]=e}):Object(i.a)(t)&&(r=t);var n=Object.keys(r);Object(s.a)(this.$.state)&&(n=n.map(t=>parseInt(t)));var l=[];n.forEach(t=>{t in this.$.state?this._outgoing(t,this.$.state[t]):l.push(t);var e=r[t];if(Object(u.a)(e)){var n=Object(p.a)(e);Object(h.a)(n)&&(e=n)}this._incoming(t,e),this.$.state[t]=e});var c=this.fire(n,{context:this.$.state,_context:this.$._state,entries:l,exits:[]});return n.forEach(t=>{this.$._state[t]=this.$.state[t]}),c}del(t){var e=Object(d.a)(t),r=[];e.forEach(t=>{t in this.$.state&&(r.push(t),this._outgoing(t,this.$.state[t])),delete this.$.state[t]});var n=this.fire(e,{context:this.$.state,_context:this.$._state,entries:[],exits:r});return e.forEach(t=>{delete this.$._state[t]}),n}asOwnMethod(t){if(Object(a.a)(t)&&this.$.params.methodPrefix&&t.startsWith(this.$.params.methodPrefix)){var e=t.substr(this.$.params.methodPrefix.length);if(e&&Object(c.a)(e=this[e]))return e.bind(this)}}get(t){var e=this.asOwnMethod(t);if(e)return e;var r=this.$.state[t];return Object(s.a)(this.$.state)&&!Object(l.a)(t)&&Object(c.a)(r)?(...t)=>{var e=this.$.state.slice(),n=r.apply(this.$.state,t),a=Object(m.a)(Object.keys(e).concat(Object.keys(this.$.state))).filter(t=>{if(t=parseInt(t),this.$.state[t]!==e[t])return t in this.$.state?this._incoming(t,this.$.state[t]):this._outgoing(t,e[t]),!0});return a.length&&(this.fire(a,{context:this.$.state,_context:this.$._state}),this.$._state=this.$.state.slice()),n}:r}has(t){return t in this.$.state}keys(){return Object.keys(this.$.state)}_shouldFire(t,e,r){var s=0,o=0;"CACHE"in r.$||(r.$.CACHE={},r.$._CACHE={});var c=t.params||{};return(Object(n.a)(t.eventNames)?e:Object(d.a)(t.eventNames)).forEach(t=>{if(!(t in r.$.CACHE)){r.$.CACHE[t]={},r.$._CACHE[t]={};var e={},n={},h=Object(a.a)(t)?t.split("."):t;r.$.CACHE[t].val=Object(j.a)(r.context,h,e),r.$._CACHE[t].val=Object(j.a)(r._context,h,n),r.$.CACHE[t].existence=e.exists,r.$._CACHE[t].existence=n.exists,!1===c.diff||"diffing"in r.$.CACHE[t]||(r.$.CACHE[t].diffing=r.bubbling||r.$.CACHE[t].existence!==r.$._CACHE[t].existence||(Object(i.a)(r.$.CACHE[t].val)&&Object(i.a)(r.$._CACHE[t].val)?!Object(O.a)(r.$.CACHE[t].val,r.$._CACHE[t].val):r.$.CACHE[t].val!==r.$._CACHE[t].val))}Object(l.a)(c.pulse)&&r.context&&r._context&&(0===c.pulse&&r.$.CACHE[t].val&&!r.$._CACHE[t].val?o++:1===c.pulse&&!r.$.CACHE[t].val&&r.$._CACHE[t].val&&o++),(!1===c.diff||r.$.CACHE[t].diffing)&&s++}),!o&&s&&super._shouldFire(t,e,r)}_outgoing(t,e){Object(h.a)(e)&&(t in this.$.bubblers&&e.unobserve(this.$.bubblers[t],{allowBubbling:!0}),Object(c.a)(e.getOffsetParent)&&e.getOffsetParent()===this&&e.setOffsetParent(null))}_incoming(t,e){Object(h.a)(e)&&(e.observe(this._getBubbler(t),{allowBubbling:!0}),Object(c.a)(e.getOffsetParent)&&!e.getOffsetParent()&&e.setOffsetParent(this))}setOffsetParent(t){this.$.offsetParent=t}getOffsetParent(){return this.$.offsetParent}_getBubbler(t){return this.$.bubblers=this.$.bubblers||{},this.$.bubblers[t]=(e,r,n)=>{var a={};return a.context=this.$.state,a._context=this.$._state,a.entries=(n.entries||[]).slice(),a.exits=(n.exits||[]).slice(),a.bubbling=(n.bubbling?Object(d.a)(n.bubbling):Object.keys(e)).map(e=>t+"."+e),this.fire(t,a)},this.$.bubblers[t]}warn(t){console.error(t)}error(t){if(this.$.params.strictDebug)throw new Error(t);console.error(t)}proxy(){return function(t,e){var r={get:(t,r)=>"__proxyTargetByCommons"===r?t:"__proxyTrapByCommons"===r?e:e.get?e.get(t,r):t[r]};return new Proxy(t,Object(f.a)({},e,r))}(this,{get:function(t,e){var r=t.get(e);return Object(i.a)(r)&&Object(c.a)(r.proxy)&&(r=r.proxy()),r},set:function(t,e,r){return t.set(e,r),!0},has:function(t,e){return t.has(e)},deleteProperty:function(t,e){return t.del(e)},ownKeys:function(t){return Object.keys(t.$.state)},defineProperty:function(t,e,r){return Object.defineProperty(t.$.state,e,r),t.set(e,t.$.state[e]),!0},getOwnPropertyDescriptor:function(t,e){return Object.getOwnPropertyDescriptor(t.$.state,e)},getOwnPropertySymbols:function(t){return Object.getOwnPropertySymbols(t.$.state)},getOwnPropertyNames:function(t){return Object.getOwnPropertyNames(t.$.state)}})}};S.params={methodPrefix:"$"};var _=S;r.d(e,"a",(function(){return k}));e.b=_},function(t,e,r){"use strict";var n=r(25);e.a=function(t){return Object(n.a)(t)?t.__proxyTargetByCommons:void 0}},function(t,e,r){"use strict";e.a=function(t){return!0===t||!1===t}},function(t,e,r){"use strict";var n=r(17);e.a=function(t,...e){return e.forEach(e=>Object(n.a)(t,e)),t}},function(t,e,r){"use strict";e.a=function(t){return"function"==typeof t}},function(t,e,r){"use strict";var n=r(0),a=r(2),s=r(14);e.a=function(t,e=[]){return Object(s.a)([{},t],(t,r,s)=>{if(!Object(a.a)(s[t]))return Object(a.a)(e)?e(t):!Object(n.a)(e)||!e.length||e.indexOf(t)>-1},!1,!1,!1)}},function(t,e,r){"use strict";var n=r(0);e.a=function(t,e,r=null){return Object(n.a)(e)?t.filter(t=>r?e.filter(e=>r(t,e)).length:-1===e.indexOf(t)):[]}},function(t,e,r){"use strict";e.a=function(t,e){return t.reduce((t,r)=>t&&e(r),!0)}},function(t,e,r){"use strict";var n=r(4),a=r(0),s=r(1),i=(r(30),r(7)),o=r(3),l=r(17),c=r(9),h=r(6),p=function(t,e){return"string"!=typeof t?t:t.replace(/\w\S*/g,(function(t){return t.charAt(0).toUpperCase()+(void 0!==typeof e&&e?t.substr(1).toLowerCase():t.substr(1))}))},u=function(t,e){return t=p(t.replace(/-/g," ")).replace(/ /g,""),e?t:t[0].toLowerCase()+t.substr(1)};const f={readCallbacks:[],writeCallbacks:[],_run:function(){requestAnimationFrame(()=>{f.readCallbacks.forEach((t,e)=>{t&&!t()&&(f.readCallbacks[e]=null)}),f.writeCallbacks.forEach((t,e)=>{t&&!t()&&(f.writeCallbacks[e]=null)}),f._run()})},onread:function(t,e=!1){if(e)return new Promise((e,r)=>{f.readCallbacks.push(()=>{t(e,r)})});f.readCallbacks.push(t)},onwrite:function(t,e=!1){if(e)return new Promise((e,r)=>{f.writeCallbacks.push(()=>{t(e,r)})});f.writeCallbacks.push(t)},cycle:function(t,e,r){f.onread(()=>{var n=t(r);if(n){var a=n=>{f.onwrite(()=>{var a=e(n,r);if(a){var s=r=>{f.cycle(t,e,r)};a instanceof window.Promise?a.then(s):s()}})};n instanceof window.Promise?n.then(a):a()}})}};f._run();var d=f;const m=function(t,e=document){return b(t,e,!1)},b=function(t,e=document,r=!0){var n,a=r?"querySelectorAll":"querySelector";try{n=e[a](t)}catch(r){try{n=e[a](t.replace(/\:is\(/g,":matches("))}catch(r){try{n=e[a](t.replace(/\:is\(/g,":-webkit-any("))}catch(r){try{n=e[a](t.replace(/\:is\(/g,":-moz-any("))}catch(t){throw t}}}}return n};Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(t){for(var e=(this.document||this.ownerDocument).querySelectorAll(t),r=e.length;--r>=0&&e.item(r)!==this;);return r>-1});const g=function(t,e,r=null){t.dataset.__customDatasetKey||(t.dataset.__customDatasetKey=v.length,v[t.dataset.__customDatasetKey]={});var i=v[t.dataset.__customDatasetKey];if(2===arguments.length){if(Object(n.a)(e))return i[u(e)];if(Object(a.a)(e)){var o={};return e.forEach(t=>{o[t]=i[u(t)]}),o}}var l=e;Object(s.a)(e)||(l=Object(c.a)(e,r)),Object(h.a)(l,(t,e)=>{i[u(t)]=e})},v=[],O=function(t,e,r=null,i=null){if(2===arguments.length){if(Object(n.a)(e))return t.getAttribute(e);if(Object(a.a)(e)){var o={};return e.forEach(e=>{o[e]=t.getAttribute(e)}),o}}var p=e;return Object(s.a)(p)?i=r:p=Object(c.a)(e,r),Object(h.a)(p,(e,r)=>{if(arguments.length>3||Object(s.a)(p)&&arguments.length>2){var a=Object(n.a)(r)?r.trim():r,o=t.getAttribute(e),c=o?o.split(" ").map(t=>t.trim()):[];!i&&c.includes(a)?t.setAttribute(e,Object(l.a)(c,a).join(" ")):i&&!c.includes(a)&&t.setAttribute(e,c.concat(a).join(" "))}else!1===r?t.removeAttribute(e):t.setAttribute(e,!0===r?"true":r)}),t},j=function(t,e=null){return arguments.length>1?(Object(n.a)(e)?t.innerHTML=e:(t.innerHTML="",Object(i.a)(e)||t.append(e)),t):t.innerHTML},w=function(t,e=null){return arguments.length>1?(t.innerText=Object(i.a)(e)?"":e,t):t.innerText},y=function(t,e){return t.append(Object(i.a)(e)?"":e),t},x=function(t,e){return t.prepend(Object(i.a)(e)?"":e),t},$=(C=window.getComputedStyle(document.documentElement,""),{prefix:E=(Array.prototype.slice.call(C).join("").match(/-(moz|webkit|ms)-/)||""===C.Olink&&["","o"])[1],css:"-"+E+"-",api:"WebKit|Moz|Ms|O".match(new RegExp("("+E+")","i"))[1]});var C,E,k=function(t,e){return void 0===t?"":t.split(/(?=[A-Z])/).join(e||" ")},S=r(5),_=r(2),A=(r(15),r(33));var M=class{constructor(t,e,r,n){this.el=t,this.params=Object(o.a)(e),this.readCallback=r,this.writeCallback=n,this.$savepoints=[]}save(){var t=this.readCallback(this.el,this.params);return t instanceof Promise?t.then(t=>this.$savepoints.push(t)):Object(s.a)(t)?this.$savepoints.push(t):void 0}commit(t=0){for(var e=0;e<=t&&t<this.$savepoints.length;e++)this.$savepoints[e]=null;return this}rollback(t=0){if(!Object(S.a)(t))throw new Error("A valid transaction ID transaction must be provided!");var e=e=>{var r=this.$savepoints.splice(t),n=r.shift();if(!n)return{};var a=r.pop(),s={};return this.params.forEach(t=>{a&&e[t]!==a[t]||e[t]!==n[t]&&(s[t]=n[t])}),s},r=this.readCallback(this.el,this.params);return r instanceof Promise?r.then(t=>this.writeCallback(this.el,e(t))):this.writeCallback(this.el,e(r))}depth(){return this.$savepoints.length}};const P=class{constructor(t){Object(h.a)(t,(t,e)=>{["rotate","scale","skew","translate"].includes(t)&&(this[t]=Object(a.a)(e)?new P[t](...e):new P[t](e))})}toString(){return["rotate","scale","skew","translate"].reduce((t,e)=>t+(this[e]&&this[e].length?" "+this[e]:""),"").trim()}static parse(t){var e=function(t){return Math.round(100*t)/100},r=function(t){var r=180*t/Math.PI;return e(r)},n=function(t){var e=[];if(window.WebKitCSSMatrix)return[(e=new window.WebKitCSSMatrix(t)).a,e.b,e.c,e.d,e.e,e.f];for(var r,n=/[\d\.\-]+/g;r=n.exec(t);)e.push(+r);return e}(t),a=n[0],s=n[1],i=n[2],o=n[3];if(a*o==s*i)throw new Error("Dramatic.parseTransform: matrix is singular");var l=Math.sqrt(a*a+s*s),c=(a/=l)*i+(s/=l)*o;i-=a*c,o-=s*c;var h=Math.sqrt(i*i+o*o);return c/=h,a*(o/=h)<s*(i/=h)&&(a=-a,s=-s,c=-c,l=-l),new P({translate:[n[4],n[5]],scale:[e(l),e(h)],rotate:r(Math.atan2(s,a)),skew:r(Math.atan(c))})}};P.rotate=class extends Array{toString(){return"rotate("+this.map(t=>Object(S.a)(t)?t+"deg":t).join(", ")+")"}},P.scale=class extends Array{toString(){return"scale("+this.join(", ")+")"}},P.skew=class extends Array{toString(){return"skew("+this.map(t=>Object(S.a)(t)?t+"deg":t).join(", ")+")"}},P.translate=class extends Array{toString(){return"translate("+this.map(t=>Object(S.a)(t)?t+"px":t).join(", ")+")"}};var T=P;const R=function(t,e,r=null){var n=window.getComputedStyle(t,r);return I(e,(t,e)=>{var r=n.getPropertyValue(U(t)||t);return"width"!==t&&"height"!==t||""!==r||(r="0px"),"transform"===t&&(r=T.parse(r)),r},!1)},N=function(t,e,r=null){e="string"==typeof e?Object(c.a)(e,r):e;var n={inset:["top","right","bottom","left"],margin:["top","right","bottom","left"],padding:["top","right","bottom","left"]};return I(Object.keys(e),(r,o)=>{var l=e[o];Object(h.a)(n,(t,e)=>{r===t&&(Object(s.a)(l)&&(l=e.map(t=>l[t]).filter(t=>!Object(i.a)(t))),Object(a.a)(l)&&(l=l.join(" ")))}),"transform"!==r||!Object(s.a)(l)||l instanceof T||(l=new T(l).toString()),t.style[r]=K.includes(r)&&Object(S.a)(l)?l+"px":l},"auto"),t},L=function(t,...e){return e.length>1&&Object(n.a)(e[0])||Object(s.a)(e[0])?N(t,...e):R(t,...e)},F=function(t,e,r=null){return d.onread((n,a)=>{try{n(Object(_.a)(e)?e(t):R(t,e,r))}catch(t){a(t)}},!0)},H=function(t,e,r=null){return d.onwrite((n,a)=>{try{n(N(t,e,r))}catch(t){a(t)}},!0)},W=function(t,e,r=null,n=null){var a=Object(s.a)(e)?Object.keys(e):e;n=Object(s.a)(e)?r:n;var i=D(t,a);return H(t,e,r).then(()=>F(t,n||a).then(e=>H(t,i).then(()=>e)))},D=function(t,e,r="auto"){var n=t.getAttribute("style");return"all"===e&&(e=n.split(";").map(t=>t.split(":")[0])),I(e,t=>(new RegExp(";[ ]*?"+t+":([^;]+);?","g").exec(";"+n)||["",""])[1].trim(),r)},q=function(t,e,r=!0){var n=Object(a.a)(t)?t.join("|"):t;if(!e&&Q[n])return Q[n];var s=[];return z(e=>{if((e.type===window.CSSRule.KEYFRAMES_RULE||e.type===window.CSSRule[$.api.toUpperCase()+"_KEYFRAMES_RULE"])&&(Object(a.a)(t)?t:[t]).indexOf(e.name)>-1)return s=s.concat(s,function(t){for(var e=[],n=0;n<t.cssRules.length;n++){var a=t.cssRules[n],s=Y(a.cssText.replace(a.keyText,"").replace("{","").replace("}","").trim()),i=(a.keyText||" ").split(",").map(t=>"from"===t?0:"to"===t?1:parseInt(t)/100);if(r)for(B(s,["animation-","transition-"]);i.length;){var o=Object(A.a)(s);o.offset=i.shift(),e.push(o)}else s.offset=i.length>1?i:i[0],e.push(s)}return e.sort((t,e)=>t.offset===e.offset?0:t.offset>e.offset?1:-1)}(e)),!0},!0),Q[n]=s,s},B=function(t,e,r=""){Object(a.a)(r)?r.forEach(e=>{B(t,e)}):(t[r+"timing-function"]&&(t.easing=t[r+"timing-function"],delete t[r+"timing-function"]),t[r+"fill-mode"]&&(t.fill=t[r+"fill-mode"],delete t[r+"fill-mode"]),t[r+"iteration-count"]&&(t.iterations=t[r+"iteration-count"],delete t[r+"iteration-count"],"infinite"===t.iterations&&(t.iterations=1/0)))},I=function(t,e,r){var n={},s=Object(o.a)(t);return Object(h.a)(s,(t,a)=>{((t,a)=>{var i=k(a,"-").toLowerCase();if("auto"===r)n[i]=e(U(i)||i,s[t]);else{if(r){var o=U(i);o&&(n[o]=e(o,s[t]))}n[i]=e(i,s[t])}})(t,a)}),Object(a.a)(t)||r||"size"===t||"offsets"===t?n:n[t]},z=function(t,e){var r=document.styleSheets,n=function(e){try{for(var r=0;r<e.cssRules.length;r++){var n=e.cssRules[r];if(!0===t(n))return!0}}catch(t){}};if(e){for(var a=r.length-1;a>=0;a--)if(!0===n(r[a]))return!0}else for(a=0;a<r.length;a++)if(!0===n(r[a]))return!0},Y=function(t){var e={};return Object(h.a)(t.split(";"),(t,r)=>{r=r.split(":"),e[r[0].trim()]=r[1].trim()}),e},U=function(t){var e=u(t,!0);if($.api+e in document.body.style)return $.css+k(t,"-")},K=["width","height","top","left","right","bottom","padding","padding-top","padding-left","padding-right","padding-bottom","margin","margin-top","margin-left","margin-right","margin-bottom","border-width","border-top-width","border-left-width","border-right-width","border-bottom-width","outline-width","outline-top-width","outline-left-width","outline-right-width","outline-bottom-width"],Q={};var X=r(28),V=r(8);const J=function(t,e,r=!1){var n=null,s=t;Object(a.a)(t)||(n=Object.keys(t),s=Object.values(t));var i=void 0,l=s.reduce((t,n)=>{if(void 0===i){if(e(n,t))return n;if(r&&(Object(V.a)(n)||Object(_.a)(n))&&void 0!==(i=J(n,e,r)))return n}return t},void 0);if(void 0!==l){var c=n?n[s.indexOf(l)]:s.indexOf(l);return void 0!==i?[c].concat(Object(o.a)(i)):c}};var Z=J;const G={},tt={setup(t,e,r,n){var a=!0,s=tt.events.map((t,e)=>{var n=r.get(t);return n||(a=!1,n=new Hammer.Tap({event:t,taps:tt.events.length-e}),r.add(n)),n});if(!a){for(var i,o=s.slice();(i=o.shift())&&o.length;)i.recognizeWith(o);for(var l,h=s.slice();(l=h.pop())&&h.length;)l.requireFailure(h)}r.on(n,e=>t(e.type,{context:Object(c.a)(e.type,e)}))},teardown(t,e,r){e.off(r)},events:["tripletap","doubletap","singletap"]};tt.events.forEach(t=>{G[t]=tt});var et=G;const rt=class extends X.a{constructor(t,e={}){super(),this.el=t,this.$.params=e,this.$.activeHooks={},this.$.hammertime=new Hammer.Manager(this.el)}_setup(t,e){if(!this.$.activeHooks[t])if(et[t])if(Object(n.a)(et[t]))this.$.activeHooks[t]=e=>this.fire(t,{context:Object(c.a)(t,e)}),this.addListener(et[t],this.$.activeHooks[t]);else{if(!Object(_.a)(et[t].setup))throw new Error('The "'+t+'" event hook must have a "setup" function!');this.$.activeHooks[t]=!0,et[t].setup((r,n)=>{Object(_.a)(et[t].validate)&&!et[t].validate(r,n,t,e)||this.fire(r,n)},this.el,this.$.hammertime,t)}else if(at(t.split("+")[0])){var r=t.split("+").map(t=>{var e=at(t),r=this.$.hammertime.get(e);return r||(r=new(Hammer[p(e)]),this.$.hammertime.add(r)),r});r.forEach((t,e)=>{t.recognizeWith(r.slice(e+1))}),this.$.activeHooks[t]=e=>this.fire(t,{context:Object(c.a)(t,e)}),this.$.hammertime.on(t.split("+").join(" "),this.$.activeHooks[t])}else this.$.activeHooks[t]=e=>this.fire(t,{context:Object(c.a)(t,e)}),this.el.addEventListener(t,this.$.activeHooks[t])}_teardown(t){if(this.$.activeHooks[t]){if(et[t])if(Object(n.a)(et[t]))this.removeListener(et[t],this.$.activeHooks[t]);else{if(!Object(_.a)(et[t].teardown))throw new Error('The "'+t+'" event hook must have a "teardown" function!');et[t].teardown(this.el,this.$.hammertime,t)}else at(t.split("+")[0])?this.$.hammertime.off(t.split("+").join(" "),this.$.activeHooks[t]):this.el.removeEventListener(t,this.$.activeHooks[t]);delete this.$.activeHooks[t]}}addListener(...t){var e=super.addListener(...t);return Object(o.a)(e.eventNames).forEach(t=>{this._setup(t,e.params)}),e.removeCallback=()=>{Object(o.a)(e.eventNames).forEach(t=>{this._teardown(t)})},e}},nt={press:["press","pressup"],rotate:["rotate","rotatestart","rotatemove","rotateend","rotatecancel"],pinch:["pinch","pinchstart","pinchmove","pinchend","pinchcancel","pinchin","pinchout"],pan:["pan","panstart","panmove","panend","pancancel","panleft","panright","panup","pandown"],swipe:["swipe","swipeleft","swiperight","swipeup","swipedown"],tap:["tap"]},at=function(t){return Z(nt,e=>e.includes(t),!1)};var st=r(31),it=r(19),ot=r(27);const lt=class{constructor(t,e,r={}){this.el=t,this.$={readyCallbacks:[],finishCallbacks:[],cancelCallbacks:[],params:r},r.fill=r.fill||"both","duration"in r||(r.duration=400),r.easing&&-1===["ease-in","ease-out","ease-in-out"].indexOf(r.easing)&&-1===r.easing.indexOf("(")&&(r.easing=function(t){t=t.indexOf("-")?t:k(t,"-");return window.getComputedStyle(document.body).getPropertyValue("--"+t)}(r.easing)||r.easing);var n={inset:["top","right","bottom","left"],margin:["top","right","bottom","left"],padding:["top","right","bottom","left"]};const o=t=>{t=t.slice();var e={},o={};Object(h.a)(t,(t,r)=>{Object(h.a)(n,(t,e)=>{r[t]&&(Object(s.a)(r[t])&&(r[t]=e.map(e=>r[t][e]).filter(t=>!Object(i.a)(t))),Object(a.a)(r[t])&&(r[t]=r[t].join(" ")))}),!r.transform||!Object(s.a)(r.transform)||r.transform instanceof T||(r.transform=new T(r.transform).toString()),Object(st.a)(Object.keys(r),"offset","easing").forEach(t=>{K.includes(t)&&Object(S.a)(r[t])&&(r[t]+="px"),e[t]=void 0===e[t]?r[t]:e[t],o[t]=r[t]})});try{var l=this.el.animate(t,r)}catch(t){return void(this.$.error=t)}r.reverse&&l.reverse(),l.effect||(l.effect={}),l.effect.duration||(l.effect.duration=r.duration),l.onfinish=()=>{r.cancelForCss&&(l.cancel(),"forwards"!==r.fill&&"both"!==r.fill||N(this.el,o)),this.$.finishCallbacks.forEach(t=>{t(this.el)})},l.oncancel=()=>{this.$.cancelCallbacks.forEach(t=>{t(this.el)})},this.$.anim=l,this.$.firstFrame=e,this.$.lastFrame=o,this.$.readyCallbacks.length&&this.$.readyCallbacks.forEach(t=>t(l,r,e,o))};Object(_.a)(e)?e(t,o):lt.createCallback(t,e,o,t=>{this.$.error=t})}ready(t,e){this.$.error?e&&e(this.$.error):this.$.anim?t(this.$.anim,this.$.params,this.$.firstFrame,this.$.lastFrame):this.$.readyCallbacks.push(t)}onfinish(t){if(!Object(_.a)(t))throw new Error("Onfinish() accepts only a function.");return this.$.finishCallbacks.push(t),this}oncancel(t){if(!Object(_.a)(t))throw new Error("Oncancel() accepts only a function.");return this.$.cancelCallbacks.push(t),this}seek(t){if(!Object(ot.a)(t))throw new Error("Seek() accepts only a numeric value.");return this.ready((e,r)=>{e.currentTime=Math.min(t*r.duration,r.duration)}),this}progress(){return this.$.anim?this.$.anim.currentTime/this.$.anim.effect.duration:0}reverse(){return this.ready(t=>t.reverse()),this}play(){return new Promise((t,e)=>{this.ready(r=>{r.play(),this.onfinish(()=>t(this)),this.oncancel(()=>e(this))},e)})}pause(){return this.ready(t=>t.pause()),this}finish(){return this.ready(t=>t.finish()),this}cancel(){return this.ready(t=>t.cancel()),this}static createCallback(t,e,r,i){if(Object(s.a)(e))d.onread(()=>{lt.createCallback(t,[R(t,Object.keys(e)),e],r,i)});else{if(Object(n.a)(e)){var o=e;!(e=q(t,o)).length&&i&&i('Animation name "'+o+'" not found in any stylesheet!')}if(Object(a.a)(e)){var l=[];if(Object(h.a)(e,(t,e)=>{"auto"===e.height&&Object(it.a)(l,t),"auto"===e.width&&Object(it.a)(l,t)}),l.length)return void W(t,{width:"auto",height:"auto"},t=>t.getBoundingClientRect()).then(t=>{l.forEach(r=>{"auto"===e[r].width&&(e[r].width=t.width+"px"),"auto"===e[r].height&&(e[r].height=t.height+"px")}),r(e)})}r(e)}}};var ct=lt,ht=function(t,e){return t.reduce((t,r)=>t||e(r),!1)},pt=r(24),ut=r(11),ft=r(20),dt=r(12);const mt=function(t,e=!0,r=null){var n=["width","height","top","right","bottom","left"],a=t=>t instanceof HTMLElement||t instanceof HTMLDocument,i={};if(Object(s.a)(t)&&ht(["clientX","clientY","offsetX","offsetY","pageX","pageY","screenX","screenY"],e=>e in t))i=!1!==e?{width:0,height:0}:{},r===window||a(r)?(i.left=t.clientX,i.top=t.clientY):!0===r?(i.left=t.offsetX,i.top=t.offsetY):!1!==r&&(i.left=t.pageX,i.top=t.pageY);else if(t===window)i=!1!==e?{width:window.innerWidth,height:window.innerHeight}:{},r===window||!0===r||a(r)?(i.left=0,i.top=0):!1!==r&&(i.left=window.pageXOffset||document.documentElement.scrollLeft,i.top=window.pageYOffset||document.documentElement.scrollTop);else if(a(t))delete(i=t.getBoundingClientRect().toJSON()).x,delete i.y,delete i.right,delete i.bottom,!1===e&&(delete i.width,delete i.height),!0===r?r=t.offsetParent:!1===r?(delete i.left,delete i.top):r===window||a(r)||(i.left+=window.pageXOffset||document.documentElement.scrollLeft,i.top+=window.pageYOffset||document.documentElement.scrollTop);else{if(!Object(s.a)(t)||!ht(n,e=>e in t))throw new Error("Unknown object type!");i=Object(ut.a)(t,n)}if(a(r)){var o=mt(r,!1,window);i.left-=o.left,i.top-=o.top}return i},bt=function(t,e,r={}){var n=gt(mt(r.using||t),e),a={x:"width",y:"height"},s={x:"left",y:"top"},i={x:"right",y:"bottom"},o={},l={};return["x","y"].forEach(t=>{if(!1!==r[t]){var e=n.rect1[a[t]];switch(l[t]=xt(r[t]||""),l[t].keyword){case"before":o[t]=-(n[s[t]]+e);break;case"after":o[t]=n[i[t]]+e;break;case"start":o[t]=-n[s[t]];break;case"end":o[t]=n[i[t]];break;default:o[t]=n.delta[t]}l[t].predicates&&(o[t]+=$t(l[t].predicates,e))}}),o.alignment=l,o.intersection=n,o},gt=function(t,e){var r={left:t.left-e.left,top:t.top-e.top,right:e.left+e.width-(t.left+t.width),bottom:e.top+e.height-(t.top+t.height)},n=Math.max(t.left,e.left),a=Math.min(t.left+t.width,e.left+e.width),s=Math.max(t.top,e.top),i=Math.min(t.top+t.height,e.top+e.height);return r.width=a>n?a-n:0,r.height=i>s?i-s:0,r.rect1=t,r.rect2=e,r.delta=vt(t,e),r},vt=function(t,e,r=!1){var n={};return n.x=e.left+e.width/2-(t.left+t.width/2),n.y=e.top+e.height/2-(t.top+t.height/2),n.z=Math.sqrt(Math.pow(n.x,2)+Math.pow(n.y,2)),r&&(n=Object(ft.a)(n,Ot(n))),n},Ot=function(t){if(Object(S.a)(t.y)&&Object(S.a)(t.x))var e=Math.atan(t.y/t.x);else if(Object(S.a)(t.x)&&Object(S.a)(t.z))e=Math.acos(t.x/t.z);else if(Object(S.a)(t.y)&&Object(S.a)(t.z))e=Math.asin(t.y/t.z);var r=90-e;return{angle:e,angle2:r,isHorizontal:e<45,isVertical:r<45}},jt=function(t,e=["left","top","right","bottom"]){var r={right:"left",left:"right",bottom:"top",top:"bottom"},n=R(t,e.concat("position")),a=null;return e.forEach(e=>{"auto"===n[e]?"relative"===n.position?n[e]=-parseFloat(n[r[e]]):"fixed"===n.position?(a=a||gt(mt(t),mt(window)),n[e]=a[e]):"absolute"===n.position&&(a=a||gt(mt(t),mt(t.offsetParent)),n[e]=a[e]):n[e]=parseFloat(n[e])}),delete n.position,n},wt=function(t){var e=window.getComputedStyle(t),r="absolute"===e.position,n=/(auto|scroll)/;if("fixed"!==e.position)for(var a=t;a=a.parentElement;)if(e=window.getComputedStyle(a),(!r||"static"!==e.position)&&n.test(e.overflow+e.overflowY+e.overflowX))return a;return document.body},yt=function(t){return t===window?t.pageYOffset||t.pageYOffset:t.scrollHeight>t.clientHeight},xt=function(t){var e=new RegExp("(before|after|start|end|center)","g"),r=new RegExp("[-+][0-9]+(%)?","g");return{keyword:(t.match(e)||[])[0],predicates:t.match(r)}},$t=function(t,e){return t.reduce((t,r)=>t+(r.endsWith("%")?parseFloat(r)/100*e:parseFloat(r)),0)};const Ct=class{static from(t){return new Ct(function(t){if(Object(n.a)(t)){var e;if(t.trim().startsWith("<")){var r=document.createElement("div");r.innerHtml=t,e=r.firstChild}else e=m(t);return e}return t}(t))}constructor(t){this.el=t}_el(){return this.el||document.createElement("div")}_ret(t){return this.el&&t===this.el?this:t}find(t){return new Ct(this.el?m(t,this.el):void 0)}data(t,e=null){return this._ret(g(this._el(),...arguments))}css(...t){return this._ret(L(this._el(),...arguments))}attr(t,e=null,r=null){return this._ret(O(this._el(),...arguments))}html(t=null){return this._ret(j(this._el(),...arguments))}text(t=null){return this._ret(w(this._el(),...arguments))}append(t){return this._ret(y(this._el(),t))}prepend(t){return this._ret(x(this._el(),t))}cssAsync(...t){return function(t,...e){return e.length>1&&Object(n.a)(e[0])||Object(s.a)(e[0])?H(t,...e):F(t,...e)}(this._el(),...arguments).then(t=>this.el&&t===this.el?this:t)}attrAsync(t,e=null,r=null){return function(t,e,r=null,n=null){return 2===arguments.length?d.onwrite((t,e)=>{try{t(O(...arguments))}catch(t){e(t)}},!0):d.onread((t,e)=>{try{t(O(...arguments))}catch(t){e(t)}},!0)}(this._el(),...arguments).then(t=>this.el&&t===this.el?this:t)}htmlAsync(t){return function(t,e=null){return arguments.length>1?d.onwrite((t,e)=>{try{t(j(...arguments))}catch(t){e(t)}},!0):d.onread((t,e)=>{try{t(j(...arguments))}catch(t){e(t)}},!0)}(this._el(),...arguments).then(t=>this.el&&t===this.el?this:t)}textAsync(t){return function(t,e=null){return arguments.length>1?d.onwrite((t,e)=>{try{t(w(...arguments))}catch(t){e(t)}},!0):d.onread((t,e)=>{try{t(w(...arguments))}catch(t){e(t)}},!0)}(this._el(),...arguments).then(t=>this.el&&t===this.el?this:t)}appendAsync(t){return function(t,e){return d.onwrite((t,e)=>{try{t(y(...arguments))}catch(t){e(t)}},!0)}(this._el(),...arguments).then(()=>this)}prependAsync(t){return function(t,e){return d.onwrite((t,e)=>{try{t(x(...arguments))}catch(t){e(t)}},!0)}(this._el(),...arguments).then(()=>this)}cssComputeAsync(...t){return W(this._el(),...arguments)}cssTransaction(t){return function(t,e){return new M(t,e,(t,e)=>D(t,e),(t,e)=>H(t,e))}(this._el(),t)}observe(...t){return function(t,...e){return g(t,"eventController")||g(t,"eventController",new rt(t)),g(t,"eventController").addListener(...e)}(this._el(),...arguments)}unobserve(...t){return function(t,...e){return!!g(t,"eventController")&&g(t,"eventController").removeListener(...e)}(this._el(),...arguments)}play(t,e={}){return"cancelForCss"in e||(e.cancelForCss=!0),new ct(this._el(),t,e).play()}translateTo(t,e={}){var r=t instanceof Ct?t.el:t;return d.onread((t,n)=>{if(!this.el)return n();var a=function(t,e,r={}){var n=bt(t,mt(e),r),a={from:new T({translate:[]}),to:new T({translate:[]}),current:{from:new T({translate:[]}),to:new T({translate:[]}),progress:{}}},s=R(t,"transform");return["x","y"].forEach((t,e)=>{t in n?(a.from.translate[e]=0,a.to.translate[e]=n[t]+s.translate[e],a.current.from.translate[e]=s.translate[e],a.current.to.translate[e]=n[t],a.current.progress[t]=Math.abs(s.translate[e]/(n[t]+s.translate[e]))):(a.from.translate[e]=s.translate[e],a.to.translate[e]=s.translate[e],a.current.from.translate[e]=s.translate[e],a.current.to.translate[e]=s.translate[e],a.current.progress[t]=0)}),a}(this.el,r,e);e.play?t(this.play([{transform:a.current.from},{transform:a.to}],e.play)):t(this.css({transform:a.to}))},!0)}offsetTo(t,e={}){var r=t instanceof Ct?t.el:t;return d.onread((t,n)=>{if(!this.el)return n();var a=function(t,e,r={}){var n=bt(t,mt(e),r),a={x:"left",y:"top"},s={x:"right",y:"bottom"},i=Object(pt.a)(["x","y"],Object.keys(n)).reduce((t,e)=>{switch(n.alignment[e].keyword){case"before":return r.alternateAnchors?Object(dt.a)(t,a[e],n[e]):Object(dt.a)(t,s[e],-n[e]);case"after":return r.alternateAnchors?Object(dt.a)(t,s[e],-n[e]):Object(dt.a)(t,a[e],n[e]);case"end":return Object(dt.a)(t,s[e],-n[e]);default:return Object(dt.a)(t,a[e],n[e])}},{}),o={from:{},to:{},current:{from:{},to:{},progress:{}}},l=jt(t,Object.keys(i));return["left","right","top","bottom"].forEach(t=>{t in i?(o.from[t]=0,o.to[t]=i[t]+l[t],o.current.from[t]=l[t],o.current.to[t]=i[t],o.current.progress[t]=Math.abs(l[t]/(i[t]+l[t]))):(o.from[t]="auto",o.to[t]="auto",o.current.from[t]="auto",o.current.to[t]="auto")}),o}(this.el,r,e);e.play?t(this.play([a.current.from,a.to],e.play)):t(this.css(a.to))},!0)}scrollTo(t,e={}){var r=t instanceof Ct?t.el:t;return d.onread((t,n)=>{if(!this.el)return n();var a=function(t,e,r={}){var n=r.scrollAnchor||wt(t);if(n=n===document.body?window:n,yt(n)){var a=bt(t,mt(e),r),s={scrollLeft:n[n===window?"pageXOffset":"scrollLeft"],scrollTop:n[n===window?"pageYOffset":"scrollTop"]};return["x","y"].forEach((t,e)=>{var r="x"===t?"scrollLeft":"scrollTop";t in a?(_coordsFormatted.from[r]=0,_coordsFormatted.to[r]=a[t]+s[r],_coordsFormatted.current.from[r]=s[r],_coordsFormatted.current.to[r]=a[t],_coordsFormatted.current.progress[t]=Math.abs(s[r]/(a[t]+s[r]))):(_coordsFormatted.from[r]=s[r],_coordsFormatted.to[r]=s[r],_coordsFormatted.current.from[r]=s[r],_coordsFormatted.current.to[r]=s[r],_coordsFormatted.current.progress[t]=0)}),_coordsFormatted}}(this.el,r,e);e.play&&console.log("scrollTo() does not currently support animation."),t(a.viewport.scrollTo(a.to.scrollLeft,a.to.scrollTop))},!0)}};e.a=Ct},function(t,e,r){"use strict";var n=r(32);e.a=function(t){return Object(n.a)(t)&&/^class\s/.test(Function.prototype.toString.call(t))}},function(t,e,r){"use strict";var n=r(26),a=function(t,e,r=!1){if(""==e)return t;var n=r?t.lastIndexOf(e):t.indexOf(e);return-1===n?t:t.substr(0,n)},s=r(3),i=r(1),o=r(19),l=r(24);const c={std:{html:{type:["#sectioning-root"],model:["head","body"],singleton:!0},caption:{model:["#flow","!table"],singleton:!0},col:{model:["#nothing"]},colgroup:{model:[{"colgroup[span]":["#nothing"]},{":not(colgroup[span])":["col","template"]}],singleton:!0},dd:{model:["#flow"],implicitRole:"definition"},dt:{model:["#flow","!#heading","!#sectioning","!header","!footer"],implicitRole:"term"},figcaption:{model:["#flow"],singleton:!0},head:{model:["#metadata"],singleton:!0},legend:{model:["#phrasing"],singleton:!0},li:{model:["#flow"],implicitRole:"listitem"},optgroup:{model:["option","#script-supporting"],implicitRole:"group"},option:{model:[{"option[label][value]":["#nothing"]},{"option[label]:not(option[value])":["#text"]},{":not(option[label])":["#text"]}]},param:{model:["#nothing"]},rp:{model:["#text"]},rt:{model:["#phrasing"]},source:{model:["#nothing"]},summary:{model:["#phrasing","#heading"],singleton:!0},track:{model:["#nothing"]},tbody:{model:["#script-supporting","tr"]},td:{model:["#flow","!#heading","!#sectioning","!header","!footer"]},tfoot:{model:["tr","#script-supporting"],singleton:!0},thead:{model:["tr","#script-supporting"],singleton:!0},tr:{model:["#script-supporting","td","th"]},a:{type:["#flow","#phrasing",{"a[href]":["#interactive","#palpable"]}],model:["#transparent","!#interactive","!a"]},abbr:{type:["#flow","#palpable","#phrasing"],model:["#phrasing"]},address:{type:["#flow","#palpable"],model:["#flow","!#heading","!#sectioning","!header","!footer","!address"]},area:{type:["#flow","#phrasing"],model:["#nothing"]},article:{type:["#flow","#palpable","#sectioning-content"],model:["#flow"],implicitRole:"article",acceptableRoles:["application","article","document","main"]},aside:{type:["#flow","#palpable","#sectioning-content"],model:["#flow"],implicitRole:"complementary",acceptableRoles:["complementary","note","search"]},audio:{type:["#embedded","#flow","#phrasing",{"audio[controls]":["#interactive","#palpable"]}],model:["#transparent","!#media","track",{":not(audio[src])":["source"]}]},b:{type:["#flow","#palpable","#phrasing"],model:["#phrasing"]},base:{type:["#metadata"],model:["#nothing"],singleton:!0},bdi:{type:["#flow","#palpable","#phrasing"],model:["#phrasing"]},bdo:{type:["#flow","#palpable","#phrasing"],model:["#phrasing"]},blockquote:{type:["#flow","#palpable","#sectioning-root"],model:["#flow"]},body:{type:["#sectioning-root"],model:["#flow","@banner","@contentinfo","@complementary","@main"],singleton:!0},br:{type:["#flow","#phrasing"],model:["#nothing"]},button:{type:["#flow","#interactive","#palpable","#phrasing"],model:["#phrasing","!#interactive"]},canvas:{type:["#embedded","#flow","#palpable","#phrasing"],model:["#transparent","!#interactive","a","img[usemap]","button",'input[type="button"]','input[type="radio"]','input[type="checkbox"]',"select[multiple]","select[size>=1]","[tabindex]!#interactive"]},cite:{type:["#flow","#palpable","#phrasing"],model:["#phrasing"]},code:{type:["#flow","#palpable","#phrasing"],model:["#phrasing"]},data:{type:["#flow","#palpable","#phrasing"],model:["#phrasing"]},datalist:{type:["#flow","#phrasing"],model:["#phrasing","#script-supporting","option"]},del:{type:["#flow","#phrasing"],model:["#transparent"]},details:{type:["#flow","#interactive","#palpable","#sectioning-root"],model:["#flow","summary"]},dfn:{type:["#flow","#palpable","#phrasing"],model:["#phrasing","!dfn"],implicitRole:"term"},dialog:{type:["#flow","#sectioning-root"],model:["#flow"],implicitRole:"dialog"},div:{type:["#flow","#palpable"],model:[{"dl > div":["dt","dd"]},{":not(dl > div)":["#flow"]}]},dl:{type:["#flow"],model:["#script-supporting","dl","dt","div"]},em:{type:["#flow","#palpable","#phrasing"],model:["#phrasing"]},embed:{type:["#embedded","#flow","#phrasing","#interactive","#palpable"],model:["#nothing"]},fieldset:{type:["#flow","#sectioning-root","#palpable"],model:["legend","#flow"]},figure:{type:["#flow","#sectioning-root","#palpable"],model:["#flow","figcaption"],implicitRole:"figure"},footer:{type:["#flow","#palpable"],model:["#flow","!header","!footer"],acceptableRoles:["contentinfo"],singleton:!0},form:{type:["#flow","#palpable"],model:["#flow","!form"]},h1:{type:["#flow","#heading","#palpable"],model:["#phrasing"],implicitRole:"heading"},h2:{type:["#flow","#heading","#palpable"],model:["#phrasing"],implicitRole:"heading"},h3:{type:["#flow","#heading","#palpable"],model:["#phrasing"],implicitRole:"heading"},h4:{type:["#flow","#heading","#palpable"],model:["#phrasing"],implicitRole:"heading"},h5:{type:["#flow","#heading","#palpable"],model:["#phrasing"],implicitRole:"heading"},h6:{type:["#flow","#heading","#palpable"],model:["#phrasing"],implicitRole:"heading"},header:{type:["#flow","#palpable"],model:["#flow","!header","!footer"],acceptableRoles:["banner"],singleton:!0},hgroup:{type:["#flow","#heading","#palpable"],model:["h1","h2","h3","h4","h5","h6","#script-supporting"]},hr:{type:["#flow"],model:["#nothing"],implicitRole:"separator"},i:{type:["#flow","#palpable","#phrasing"],model:["#phrasing"]},iframe:{type:["#embedded","#flow","#phrasing","#interactive","#palpable"],model:["#nothing"]},img:{type:["#embedded","#flow","#phrasing",{"img[usemap]":["#interactive","#palpable"]}],model:["#nothing"]},input:{type:["#flow","#phrasing",{'input:not([type!="hidden"])':["#interactive","#palpable"]}],model:["#nothing"]},ins:{type:["#flow","#phrasing","#palpable"],model:["#transparent"]},kbd:{type:["#flow","#phrasing","#palpable"],model:["#phrasing"]},label:{type:["#flow","#phrasing","#interactive","#palpable"],model:["#phrasing","!label"]},link:{type:["#metadata",{"body link":["#flow","#phrasing"]}],model:["#nothing"]},main:{type:["#flow","#palpable"],model:["#flow"],implicitRole:"main",singleton:!0},map:{type:["#flow","#phrasing","#palpable"],model:["#transparent"]},mark:{type:["#flow","#phrasing","#palpable"],model:["#transparent"]},math:{type:["#embedded","#flow","#phrasing","#palpable"],model:[]},menu:{type:["#flow",{":contains(> li)":["#palpable"]}],model:["#script-supporting","li"],implicitRole:"list"},meta:{type:["#metadata",{"meta[itemprop]":["#flow","#phrasing"]}],model:["#nothing"],names:["application-name","author","description","generator","keywords","referrer","theme-color"]},meter:{type:["#flow","#labelable","#phrasing","#palpable"],model:["#phrasing","!meter"]},nav:{type:["#flow","#sectioning-content","#palpable"],model:["#flow"],implicitRole:"navigation",acceptableRoles:["navigation"]},noscript:{type:["#metadata","#flow","#phrasing"],model:[{"head link":["style","meta","link"]},{":not(head link)":["#transparent","!noscript"]}]},object:{type:["#embedded","#flow","#phrasing",{"object[usemap]":["#interactive","#palpable"]}],model:["#transparent","param"]},ol:{type:["#flow",{":contains(> li)":["#palpable"]}],model:["#script-supporting","li"],implicitRole:"list"},output:{type:["#flow","#labelable","#phrasing","#palpable"],model:["#phrasing","!meter"]},p:{type:["#flow","#palpable"],model:["#phrasing"]},picture:{type:["#embedded","#flow","#phrasing"],model:["source","img","#acript-supporting"]},pre:{type:["#flow","#palpable"],model:["#phrasing"]},progress:{type:["#flow","#labelable","#phrasing","#palpable"],model:["#phrasing","!progress"]},q:{type:["#flow","#phrasing","#palpable"],model:["#phrasing"]},ruby:{type:["#flow","#phrasing","#palpable"],model:["rp","rt"]},s:{type:["#flow","#phrasing","#palpable"],model:["#phrasing"]},samp:{type:["#flow","#phrasing","#palpable"],model:["#phrasing"]},script:{type:["#flow","#metadata","#phrasing","#acript-supporting"],model:[{"script[src]":[]}]},section:{type:["#flow","#sectioning-content","#palpable"],model:["#flow"],implicitRole:"region",acceptableRoles:["alert","alertdialog","application","contentinfo","dialog","document","log","main","marquee","region","search","status"]},select:{type:["#flow","#interactive","#labelable","#phrasing","#palpable"],model:["option","optgroup","#acript-supporting"]},slot:{type:["#flow","#phrasing"],model:["#transparent"]},small:{type:["#flow","#phrasing","#palpable"],model:["#phrasing"]},span:{type:["#flow","#phrasing","#palpable"],model:["#phrasing"]},strong:{type:["#flow","#phrasing","#palpable"],model:["#phrasing"]},style:{type:["#metadata"],model:["#text"]},sub:{type:["#flow","#phrasing","#palpable"],model:["#phrasing"]},sup:{type:["#flow","#phrasing","#palpable"],model:["#phrasing"]},svg:{type:["#embedded","#flow","#phrasing","#palpable"],model:[]},table:{type:["#flow","#palpable"],model:["caption","colgroup","thead","tbody","tr","tfoot","#script-supporting"]},td:{type:["#sectioning-root"],model:["#flow"]},template:{type:["#metadata","#flow","#phrasing","#script-supporting"],model:["#nothing"]},textarea:{type:["#flow","#interactive","#labelable","#phrasing","#palpable"],model:["#text"]},time:{type:["#flow","#phrasing","#palpable"],model:[{"time[datetime]":["#phrasing"]},{":not(time[datetime])":["#text"]}]},title:{type:["#metadata"],model:["#text"],singleton:!0},u:{type:["#flow","#phrasing","#palpable"],model:["#phrasing"]},ul:{type:["#flow",{":contains(> li)":["#palpable"]}],model:["#script-supporting","li"],implicitRole:"list"},var:{type:["#flow","#phrasing","#palpable"],model:["#phrasing"]},video:{type:["#embedded","#flow","#phrasing",{"video[controls]":["#interactive","#palpable"]}],model:["#transparent","!#media","track",{":not(video[src])":["source"]}]},wbr:{type:["#flow","#phrasing"],model:["#nothing"]}},aria:{banner:{type:["@banner"],singleton:!0},contentinfo:{type:["@contentinfo"],singleton:!0},complementary:{type:["@complementary"],singleton:!0},navigation:{type:["@navigation"],singleton:!0},list:{type:["@list"]},listitem:{type:["@listitem"]}},getContentModelFor(t){var e=t.nodeName.toLowerCase();return c.std[e]?c.expandRules(t,c.std[e].model||[]):[]},getCategoriesFor(t,e=!0){var r=t.nodeName.toLowerCase(),n=c.std[r]||c.aria[r]||{},a=[];if(e&&!t.nodeName.startsWith("#")&&(t.hasAttribute("role")||n.implicitRole))if(t.hasAttribute("role")){t.getAttribute("role").split(" ");t.getAttribute("role").split(" ").forEach(e=>{n&&n.acceptableRoles&&!n.acceptableRoles.includes(e)||(e=e.trim(),a.push("@"+e),c.aria[e]&&c.aria[e].type&&(a=a.concat(c.expandRules(t,c.aria[e].type||[]))))})}else n.implicitRole&&Object(o.a)(a,"@"+n.implicitRole,r);else a=Object(o.a)(c.expandRules(t,n.type||[]),r);return a},assertNodeBelongsInContentModel(t,e){var r,n=t instanceof HTMLElement?c.getContentModelFor(t):t,a=e instanceof HTMLElement?c.getCategoriesFor(e):e;return!Object(l.a)(n,["#nothing","#text"]).length&&(n.forEach(t=>{if(t.startsWith("!")){var e=t.substr(1);a.includes(e)&&(r=!1)}else!1!==r&&a.includes(t)&&(r=!0)}),r&&!0)},assertNodeBelongsInScopeAs(t,e,r=null){for(var n,a=c.getCategoriesFor(t),s=e;!n&&(s=s.parentNode);)Object(l.a)(a,c.getCategoriesFor(s)).length&&c.assertNodeBelongsInContentModel(s,r&&r.type||e)&&(n=s);return n===t},expandRules(t,e){var r=e.reduce((e,r)=>(Object(i.a)(r)?t.matches(Object.keys(r)[0])&&(e=e.concat(Object.values(r)[0])):e.push(r),e),[]);return r.includes("#sectioning-root")&&r.push("#sectioning-content"),r}};var h=c;const p=class{constructor(t,e,r,n=null){this.sources=Object(s.a)(t),this.namespace=Object(s.a)(e),this.getter=r,this.carry=n,this.collections={},this.value}enter(t){return t in this.collections||(this.collections[t]=new p(this.sources,this.namespace.concat(t),this.getter,this)),this.collections[t]}leave(){return this.carry}get(){if(!this.value){var t=this.namespace.slice(),e=this.carry?this.carry.get():null;this.sources.forEach((r,n)=>{(e=this.getter.call(null,r,t,e,n))&&(this.value=e)})}return this.value}find(t){for(var e,r,n=t.split("/"),a=this;(r=n.shift())&&(a=a.enter(r));)e=a;var s=e.get();if(s)return s.cloneNode(!0)}};var u=p,f=r(17),d=r(0),m=function(t,e){if(!t)return!1;if(t instanceof e)return!0;var r=t=>{for(;t&&t!==Function.prototype;){if(t===e||t.prototypes&&t.prototypes.reduce((t,n)=>t||n===e||r(n),!1))return!0;t=Object.getPrototypeOf(t)}return!1};return r(t.constructor)},b=r(18),g=class{even(t){return!(!Object(i.a)(t)||t.jsenType!==this.jsenType)&&Object(b.a)(t,this)}inherit(t){return this}withComments(t){return this.meta||(this.meta={}),this.meta.comments=t,this}withVars(t){return this.meta||(this.meta={}),this.meta.vars=t,this}};const v=class extends g{};Object.defineProperty(v.prototype,"jsenType",{get:()=>"AssignmentExpression"});var O=v;const j=class extends g{};Object.defineProperty(j.prototype,"jsenType",{get:()=>"Reference"});var w=j;const y=class extends g{};Object.defineProperty(y.prototype,"jsenType",{get:()=>"DeleteExpression"});var x=y;const $=class extends g{};Object.defineProperty($.prototype,"jsenType",{get:()=>"CallExpression"});var C=$;const E=class{static parse(t,e,r={},n=E){if(r.meta||(r.meta={vars:[]}),t.length){for(var a=Object.values(e||n.grammars),s=0;s<a.length;s++){var i=r.meta&&Object(d.a)(r.meta.vars)?r.meta.vars.length:0,o=a[s].parse(t,(t,e)=>E.parse(t,e,r,n));if(o&&r.meta&&(o.meta||(o.meta={}),o.meta.vars=r.meta.vars.slice(i),(m(o,w)||m(o,C))&&(Object(f.a)(o.meta.vars,o.context),Object(f.a)(r.meta.vars,o.context),r.meta.vars.push(o))),o&&r.explain&&console.log(t," >>-------------\x3e> ",o.jsenType),(o instanceof O||o instanceof x)&&(!r||!r.mutates))throw new Error("[Permission error:] "+t);if(o)return o}if(!1===r.assert)return;throw new Error("[Syntax error:] "+t)}}};var k=E,S=r(4),_=r(7),A=r(15),M=r(13),P=function(t,e=1){return arguments.length>1?Object(M.a)(t.slice().reverse(),e).reverse():Object(M.a)(t.slice().reverse())},T=r(20),R=r(33);const N=class{static lex(t,e,r){if(!Object(S.a)(t))throw new Error("Argument1 must be a string!");var n=new N(t,r);return N.$cache[t]=N.$cache[t]||[],N.$cache[t].push(n),n.lex(e)}static split(t,e,r){return N.lex(t,e,r).tokens}static match(t,e,r){return N.lex(t,e,r).matches}constructor(t,e){if(!Object(S.a)(t))throw new Error("Lexer requires the first argument to be a string.");this.$str=t,this.$options=e||{},this.$options.blocks||(this.$options.blocks=N.$blocks),this.$options.quotes||(this.$options.quotes=N.$quotes),this.$options.comments||(this.$options.comments=N.$comments),this.$cache=[]}lex(t,e){var r={delims:Object(s.a)(t),options:Object(T.a)(!0,{},this.$options,e||{}),nesting:[],maxDepth:0,comments:[],tokens:[],matches:[],matchesi:{}};if(!1!==r.options.cache)for(var n=0;n<this.$cache.length;n++)if(Object(b.a)(this.$cache[n].delims,r.delims)&&Object(b.a)(this.$cache[n].options,r.options))return Object(R.a)(this.$cache[n]);if(this._evalCharsAt(r,0),r.nesting.length)throw new Error("Error parsing the string: "+this.$str+". Unterminated blocks: "+Object(A.a)(r.nesting).join(", "));return!1!==r.options.cache&&this.$cache.push(r),r}_evalCharsAt(t,e){if(!(e>=this.$str.length)){var r=1,n={},a={},s={};if(t.openComment||(a=this._testQuotes(t,e)),t.openQuote||(n=this._testComments(t,e)),t.openComment||n.ending)if(t.nesting.length||s.ending)this._push(t,this.$str[e]);else r=(o=n.starting||n.ending||this.$str[e]).length,this._push(t,o,"comments"),t.options.preserveComments&&this._push(t,o);else if(t.openQuote||a.ending)this._push(t,this.$str[e]);else{if(t.options.limit&&t.matches.length===t.options.limit)return this._push(t,this.$str[e]),this._evalCharsAt(t,e+1);s=this._testNesting(t,e);s=this._testNesting(t,e);var i=this._testChars(t.options.stopChars||[],t,e);if(!t.nesting.length&&!1!==i)return t.options.stopChar=i,void(t.options.stopCharForward=this.$str.substr(e));if(t.delims.length)if(t.nesting.length||s.ending){var o;r=(o=s.starting||s.ending||this.$str[e]).length,this._push(t,o)}else{this._push(t,"");var l=this._testChars(t.delims,t,e);if(!1!==l&&(t.matches.push(l),t.matchesi[e]=l,r=l.length||1,!t.options.preserveDelims))return this._evalCharsAt(t,e+(l.length||1));this._push(t,l||this.$str[e])}else 2===t.nesting.length&&s.starting?(t.matches.push(null),this._push(t,s.starting),r=s.starting.length):!t.nesting.length&&s.ending?(this._push(t,s.ending),r=s.ending.length,t.matches.push(null)):this._push(t,this.$str[e])}return this._evalCharsAt(t,e+r)}}_testQuotes(t,e){var r={};return(t.options.quotes||[]).forEach(n=>{this.$str.substr(e,1)===n&&(t.openQuote?n===t.openQuote&&(t.openQuote=!1,r.ending=n):(t.openQuote=n,r.starting=n))}),r}_testComments(t,e){var r={};return(t.options.comments||[]).forEach(n=>{if(t.openComment){if(P(n)===P(t.openComment)){var a;(a=this.$str.substr(e).match(new RegExp("^"+P(n))))&&(t.openComment=!1,r.ending=a[0])}}else(a=this.$str.substr(e).match(new RegExp("^"+Object(M.a)(n))))&&(t.openComment=n,r.starting=a[0])}),r}_testNesting(t,e){var r={};return(t.options.blocks||[]).forEach(n=>{var a=this.$str.substr(e).match(new RegExp("^"+Object(M.a)(n)));if(a)t.nesting=t.nesting.concat([n]),r.starting=a[0];else if(t.nesting.length&&P(n)===P(P(t.nesting))){var s=this.$str.substr(e).match(new RegExp("^"+P(n)));s&&(t.nesting=t.nesting.slice(0,-1),r.ending=s[0])}}),t.maxDepth=Math.max(t.maxDepth,t.nesting.length),r}_testChars(t,e,r){for(var n=0;n<t.length;n++){var a=t[n];if(e.options.useRegex){var s=this.$str.substr(r).match(new RegExp("^"+a,!0!==e.options.useRegex?e.options.useRegex:""));if(s)return s[0]}if(!e.options.ci&&this.$str.substr(r,a.length)===a||e.options.ci&&this.$str.substr(r,a.length).toLowerCase()===a.toLowerCase())return a}return!1}_push(t,e,r="tokens"){var n=t.matches.length;Object(_.a)(t[r][n])&&(t[r][n]=""),t[r][n]+=e}split(t,e,r){return this.lex(e,r).tokens}match(t,e,r){return this.lex(e,r).matches}regParse(t,e){return this.lex(t,Object(T.a)({useRegex:!0},e||{}))}regSplit(t,e){return this.regParse(t,e).tokens}regMatch(t,e){return this.regParse(t,e).matches}};N.$blocks=[["\\(","\\)"],["\\[","\\]"],["\\{","\\}"]],N.$quotes=['"',"'","`"],N.$comments=[["\\/\\*","\\*\\/"],["\\/\\/","(\\r)?\\n"]],N.$cache={};var L=N,F=r(16),H=r(2);class W extends Array{get(t,e=!0){for(var r=0;r<this.length;r++){var n=Object(F.a)(this[r],t);if(Object(H.a)(n)&&e)return n.bind(this[r]);if(!Object(_.a)(n))return n}}static create(t){return t instanceof W?t:t?new W(t):new W}}var D=W,q=function(t,e,r){return t.startsWith(e)&&t.endsWith(r)},B=function(t,e,r=!1){if(""==e)return t;var n=r?t.lastIndexOf(e):t.indexOf(e);return-1===n?"":t.substr(n+e.length)},I=function(t,e){return a(t,e,!0)},z=function(t,e,r){return I(B(t,e),r)};const Y=class extends g{};Object.defineProperty(Y.prototype,"jsenType",{get:()=>"Abstraction"});var U=Y;const K=class extends U{constructor(t){super(),this.expr=t}eval(t=null,e=null){return this.expr.eval(t,e)}toString(t=null){return"("+this.expr.toString(t)+")"}static parse(t,e,r=K){if(q(t,"(",")")&&!L.match(t,[" "]).length)return new r(e(z(t,"(",")")))}};var Q=K;const X=class extends g{};Object.defineProperty(X.prototype,"jsenType",{get:()=>"ArrayType"});var V=X;const J=class extends V{constructor(t){super(),this.exprs=t||[]}inherit(t){if(t instanceof V){var e=t.exprs.filter(t=>this.exprs.reduce((e,r)=>e&&!t.even(r),!0));this.exprs=e.concat(this.exprs)}return this}eval(t=null,e=null){return this.exprs.map(r=>r.eval(t,e))}toString(t=null){return"["+this.exprs.map(e=>e.toString(t)).join(", ")+"]"}static parse(t,e,r=J){if(q(t,"[","]")&&!L.match(t.trim(),[" "]).length)return new r(L.split(z(t,"[","]"),[","]).map(t=>t.trim()).filter(t=>t).map(t=>e(t)))}};var Z=J;const G=class extends g{};Object.defineProperty(G.prototype,"jsenType",{get:()=>"Arguments"});var tt=G;const et=class extends tt{constructor(t=[]){super(),this.list=t}eval(t=null,e=null){return this.list.map(r=>r.eval(t,e))}toString(t=null){return"("+this.list.map(e=>e.toString(t)).join(", ")+")"}static parse(t,e,r=et){if(t=t.trim(),q(t,"(",")")&&!L.match(t,[" "]).length)return new r(L.split(z(t,"(",")"),[","]).map(t=>e(t.trim())))}};var rt=et,nt=r(23);const at=class extends g{};Object.defineProperty(at.prototype,"jsenType",{get:()=>"AssertionExpression"});var st=at;const it=class extends st{constructor(t,e){super(),this.exprs=t,this.logic=e}eval(t=null,e=null){if("!"===this.logic)return!Object(M.a)(this.exprs).eval(t,e);Object(A.a)(it.operators);for(var r=(this.logic||"").trim().toUpperCase(),n=r===(it.operators.or||"").trim().toUpperCase(),a=r===(it.operators.nor||"").trim().toUpperCase(),s=r===(it.operators.and||"").trim().toUpperCase(),i=r===(it.operators.nand||"").trim().toUpperCase(),o=!0,l=0,c=0;c<this.exprs.length;c++){if(s&&!o)return!1;if(i&&!o)return!0;if(o=this.exprs[c].eval(t,e),n&&o)return o;l+=o?1:0}return n?o:s||i?s:a&&0===l}toString(t=null){return"!"===this.logic?"!"+Object(M.a)(this.exprs).toString(t):this.exprs.map(e=>e.toString(t)).join(" "+this.logic+" ")}static parse(t,e,r=it){if(t.startsWith("!"))return new r([e(t.substr(1))],"!");var n=L.lex(t,Object(A.a)(r.operators));if(n.tokens.length>1){var a=Object(nt.a)(n.matches);if(a.length>1)throw new Error('"AND" and "OR" logic cannot be asserted in the same expression: '+t+"!");return new r(n.tokens.map(t=>e(t.trim())),Object(M.a)(a))}}};it.operators={and:"&&",or:"||"};var ot=it;const lt=class extends O{constructor(t,e,r="="){super(),this.reference=t,this.val=e,this.operator=r}eval(t=null,e=null){var r=this.reference.getEval(t,e),n=this.val.eval(t,e);return!Object(_.a)(r.context)&&!Object(_.a)(r.name)&&(Object(H.a)(e)?e(this,r.context,r.name,n):((r.context instanceof D?P(r.context):r.context)[r.name]=n,!0))}toString(t=null){return[this.reference.toString(t),this.operator,this.val.toString(t)].join(" ")}static parse(t,e,r=lt){var n=L.lex(t,r.operators);if(2===n.tokens.length){var a,s;if(!((a=e(n.tokens.shift().trim()))instanceof w&&(s=e(n.tokens.shift().trim()))))throw new Error("Invalid assignment directive: "+t);return new r(a,s,n.matches[0].trim())}}};lt.operators=[" = "];var ct=lt;const ht=class extends g{};Object.defineProperty(ht.prototype,"jsenType",{get:()=>"BooleanType"});var pt=ht;const ut=class extends pt{constructor(t){super(),this.state=t}eval(){return"true"===this.state.toLowerCase().trim()}toString(){return this.state}static parse(t,e,r=ut){if("true"===(t=t.toLowerCase().trim())||"false"===t)return new r(t)}};var ft=ut,dt=r(5);const mt=class extends C{constructor(t,e){super(),this.reference=t,this.args=e}eval(t=null,e=null){var r=this.reference.getEval(t,e),n=this.args.eval(t,e);if(!Object(_.a)(r.name)){if(Object(H.a)(e))return e(this,r.context,r.name,n);var a=D.create(r.context).slice(),s=a.get(r.name,!0);if(Object(H.a)(s))return s(...n);for(var o=a.slice();o.length&&!l;){var l,c=o.shift(),h=mt.utils||{};if((l=Object(dt.a)(c)&&h.Num?h.Num:Object(S.a)(c)&&h.Str?h.Str:Object(d.a)(c)&&h.Arr?h.Arr:Object(i.a)(c)&&h.Obj?h.Obj:null)&&Object(H.a)(l[r.name]))return n.unshift(c),l[r.name](...n);throw new Error('"'+this+'" is not a function. (Called on '+a.map(t=>typeof t).join(", ")+")")}}}toString(t=null){return this.reference.toString(t)+this.args.toString(t)}static parse(t,e,r=mt){if(!t.startsWith("(")&&t.endsWith(")")&&!L.match(t,[" "]).length){var n,a=L.split(t,[]),s=a.pop();if(!((n=e(a.join("")))instanceof w&&(s=e(s,[rt]))))throw new Error("Invalid call directive: "+t);return new r(n,s)}}};var bt=mt;const gt=class extends g{};Object.defineProperty(gt.prototype,"jsenType",{get:()=>"Comments"});var vt=gt;const Ot=class extends vt{constructor(t,e){super(),this.comments=t,this.type=e}eval(t=null,e=null){}toString(t=null){return""}static parse(t,e,r=Ot){var n=null,a=null,s=0,i="before";if(t.startsWith("//"))n=(o=L.split(B(t,"//"),["\r\n"])).shift().trim(),a=o.shift().trim(),s=1;else if(t.startsWith("/*")){n=(o=L.split(B(t,"/*"),["*/"])).shift().trim(),a=o.shift().trim(),s=2}else if(t.endsWith("*/")){var o;n=(o=L.split(_beforeLast(t,"*/"),["/*"])).pop().trim(),a=o.pop().trim(),s=2;i="after"}if(s&&(2===s&&(n=L.split(n.trim(),["\r\n"]).map(t=>t.replace(/^[\*]+/,"")).filter(t=>t.trim())),console.log(n,i,t),n=new r(n,s)),a)return(a=e(a)).meta.commenta=n,a}};var jt=Ot,wt=r(34),yt=r(6);const xt=class extends g{};Object.defineProperty(xt.prototype,"jsenType",{get:()=>"ComparisonExpression"});var $t=xt;const Ct=class extends $t{constructor(t,e,r){super(),this.operand1=t,this.operand2=e,this.operator=r}eval(t=null,e=null){return Ct.compare(this.operand1.eval(t,e),this.operand2.eval(t,e),this.operator)}toString(t=null){return[this.operand1.toString(t),this.operator,this.operand2.toString(t)].join(" ")}static parse(t,e,r=Ct){var n=Object(A.a)(r.operators).map(t=>" "+t+" "),a=L.lex(t,n);if(a.tokens.length>1){if(a.tokens.length>2)throw new Error('Malformed "Comparison" expression: '+t+"!");return new r(e(Object(M.a)(a.tokens).trim()),e(P(a.tokens).trim()),a.matches[0].trim())}}static compare(t,e,r="=="){if(-1===Object(A.a)(Ct.operators).indexOf(r))throw new Error('The operator "'+r+'" is not recognized.');if(Object(d.a)(t)&&Object(d.a)(e)&&"==="!==r){if(t.length!==e.length)return!1;var n=!0;t.sort(),e.sort();for(var a=0;a<t.length;a++)n=n&&Ct.compare(t[a],e[a],r);return n}if(Object(i.a)(t)&&Object(i.a)(e)&&"==="!==r){var s=Object.keys(t),o=Object.keys(e);if(s.length!==o.length||Object(wt.a)(s,o).length)return!1;var l=!0;return Object(yt.a)(s,(n,a)=>{l=l&&Ct.compare(t[a],e[a],r)}),l}switch(r){case"===":return t===e;case"==":case"=":return t==e;case">":return t>e;case"<":return t<e;case">=":return t>=e;case"<=":return t<=e;case"!=":return t!=e;case"!==":return t!==e;case"^=":return Object(S.a)(t)&&t.startsWith(e);case"$=":return Object(S.a)(t)&&t.endsWith(e);case"*=":return!(!Object(d.a)(e)&&!Object(S.a)(e))&&t.indexOf(e)>-1;case"~=":return Object(S.a)(t)&&Object(S.a)(e)&&(" "+t+" ").indexOf(" "+e+" ")>-1;case">=<":if(!Object(d.a)(e)||2!==e.length)throw new Error("A 'Between' comparison requires argument 2 to be an array of exactly 2 values.");return t>=e[0]&&t<=e[1];case"/**/":return e.match(new RegExp(t));default:return!1}}static diff(t,e,r){return!Ct.compare(t,e,r?"===":"==")}};Ct.operators={exact:{is:"===",isNull:"===",equalsTo:"==",notEqualsTo:"!="},relative:{lesserThan:"<",greaterThan:">",lesserThanOrEqualsTo:"<=",greaterThanOrEqualsTo:">=",between:">=<"},partial:{startsWith:"^=",endsWith:"$=",contains:"*=",any:"~=",in:"~=",matches:"/**/"}};var Et=Ct;const kt=class extends g{};Object.defineProperty(kt.prototype,"jsenType",{get:()=>"ConditionExpression"});var St=kt;const _t=class extends St{constructor(t,e,r){super(),this.assertion=t,this.onTrue=e,this.onFalse=r}eval(t=null,e=null){return this.assertion.eval(t,e)?this.onTrue.eval(t,e):this.onFalse.eval(t,e)}toString(t=null){return[this.assertion.toString(t),_t.operators[0],this.onTrue.toString(t),_t.operators[1],this.onFalse.toString(t)].join(" ")}static parse(t,e,r=_t){var n=L.split(t,r.operators);if(n.length>1){if(2===n.length)throw new Error("Malformed ternary expression: "+t+"!");return new r(e(n[0].trim()),e(n[1].trim()),e(n[2].trim()))}}};_t.operators=["?",":"];var At=_t;const Mt=class extends x{constructor(t,e="delete"){super(),this.reference=t,this.operator=e}eval(t=null,e=null){var r=this.reference.getEval(t,e);return!Object(_.a)(r.context)&&!Object(_.a)(r.name)&&(Object(H.a)(e)?e(this,r.context,r.name):(delete(r.context instanceof D?P(r.context):r.context)[r.name],!0))}toString(t=null){return this.operator+" "+this.reference.toString(t)}static parse(t,e,r=Mt){var n=L.lex(t,Object.values(r.operators));if(1===n.matches.length&&t.startsWith(n.matches[0]+" ")){var a;if(!((a=e(n.tokens.pop().trim()))instanceof w))throw new Error("Invalid delete directive: "+t);return new r(a,n.matches[0].trim())}}};Mt.operators={red:"reduce",del:"delete"};var Pt=Mt,Tt=r(11);const Rt=class extends g{};Object.defineProperty(Rt.prototype,"jsenType",{get:()=>"FunctionType"});var Nt=Rt;const Lt=class extends Nt{constructor(t,e,r={}){super(),this.paramters=t||{},this.statements=e,this.arrowFunctionFormatting=r}inherit(t){if(t instanceof Nt){for(var e=Object.keys(t.paramters),r=Object.keys(this.paramters),n=0;n<Math.max(r.length,e.length);n++){var a=e[n],s=r[n];if(!s&&a)throw new Error("Parameter #"+n+" ("+a+") in parent function must be implemented.");if(s&&a){var i=t.paramters[a],o=this.paramters[s];if(o&&!i)throw new Error("Parameter #"+n+" ("+s+") must not have a default value as established in parent function.");if(o&&i&&o.jsenType!==i.jsenType)throw new Error("Default value for parameter #"+n+" ("+s+") must be of type "+i.jsenType+" as established in parent function.")}}this.sup=t}return this}eval(t=null,e=null){return(...r)=>{var n={};Object(yt.a)(Object.keys(this.paramters),(a,s)=>{var i=this.paramters[s];if(r.length-1<a&&!i)throw new Error('The parameter "'+s+'" is required.');n[s]=r.length>a?r[a]:this.paramters[s]?this.paramters[s].eval(t,e):null});var a=D.create(n).concat(D.create(t));return this.statements.eval(a,e)}}toString(t=null){var e=[];if(Object(yt.a)(this.paramters,(r,n)=>{e.push(r+(n?"="+n.toString(t):""))}),this.arrowFunctionFormatting){var r=!1===this.arrowFunctionFormatting.head||1===e.length&&-1===e[0].indexOf("="),n=!1===this.arrowFunctionFormatting.body;return(r?e[0]:"("+e.join(", ")+")")+" => "+(n?this.statements.toString(t):"{"+this.statements.toString(t)+"}")}return"function ("+e.join(", ")+") {"+this.statements.toString(t)+"}"}static parse(t,e,r=Lt){var n;if((t=t.trim()).startsWith("function")&&(n=L.split(t,[]).slice(1).filter(t=>t.trim()))&&2===n.length)var a=!1,s=z(n.shift().trim(),"(",")"),i=z(n.shift().trim(),"{","}");else{if(t.startsWith("function")||!(n=L.split(t,["=>"]))||2!==n.length)return;s=n.shift().trim(),i=n.shift().trim(),a={};q(s,"(",")")?s=z(s,"(",")"):a.head=!1,q(i,"{","}")?i=z(i,"{","}"):a.body=!1}var o={};L.split(s,[","]).forEach(t=>{var r=t.split("=");r[1]?o[r[0].trim()]=e(r[1].trim()):o[t.trim()]=null});var l=e(i);return new r(o,l,a)}};Lt.operators=["=>"];var Ft=Lt;const Ht=class extends g{};Object.defineProperty(Ht.prototype,"jsenType",{get:()=>"MathExpression"});var Wt=Ht;const Dt=class extends Wt{constructor(t,e){super(),this.val=t,this.exprs=e}eval(t=null,e=null){return this.exprs.reduce((r,n)=>{var a=n.val.eval(t,e),s=n.operator.trim();if(!(Object(dt.a)(r)&&Object(dt.a)(a)||"+"===s))throw new Error("Invalid Math expression: "+this.toString()+"!");switch(s){case"+":return r+a;case"-":return r-a;case"*":return r*a;case"/":return r/a}},this.val.eval(t,e))}toString(t=null){return[this.val.toString(t)].concat(this.exprs.map(e=>e.operator+" "+e.val.toString(t))).join(" ")}static parse(t,e,r=Dt){var n=L.lex(t,Object(A.a)(r.operators));if(n.tokens.length>1&&n.matches.length===n.tokens.length-1){var a=Object(nt.a)(n.matches);if(Object(l.a)(a,Dt.operators.sup).length&&Object(l.a)(a,Dt.operators.sub).length)throw new Error('"Addition/subtraction" and "multiplication/division" operators cannot be used in the same expression: '+t+"!");return new r(e(n.tokens.shift().trim()),n.tokens.map((t,r)=>({operator:n.matches[r],val:e(t.trim())})))}}};Dt.operators={sup:["*","/"],sub:[" + "," - "]};var qt=Dt;const Bt=class extends g{};Object.defineProperty(Bt.prototype,"jsenType",{get:()=>"NumberType"});var It=Bt;const zt=class extends It{constructor(t,e=0){super(),this.int=t,this.dec=e}eval(){return parseFloat(this.int+(this.dec?"."+this.dec:null))}toString(t=null){return this.int+(this.dec?"."+this.dec:null)}static parse(t,e,r=zt){if(Object(dt.a)(t)){t=t.split(".");return new r(parseInt(t.shift()),parseInt(t.shift()))}}};var Yt=zt;const Ut=class extends g{};Object.defineProperty(Ut.prototype,"jsenType",{get:()=>"ObjectType"});var Kt=Ut;const Qt=class extends Kt{constructor(t){super(),this.entries=t||{}}inherit(t){return t instanceof Kt&&Object(yt.a)(t.entries,(t,e)=>{t in this.entries||(this.entries[t]=e)}),this}eval(t=null,e=null){var r={};return Object(yt.a)(this.entries,(n,a)=>{r[n]=a.eval(t,e)}),r}toString(t=null){var e=[];return Object(yt.a)(this.entries,(r,n)=>{e.push(r+Qt.operators.sub+n.toString(t))}),"{"+e.join(Qt.operators.sup)+"}"}static parse(t,e,r=Qt){if(q(t,"{","}")&&!L.match(t.trim(),[" "]).length){var n={},a=L.split(z(t,"{","}"),[Qt.operators.sup]).map(t=>t.trim()).filter(t=>t);return Object(yt.a)(a,(t,r)=>{var a=L.split(r,[Qt.operators.sub],{limit:1});n[Object(M.a)(a).trim()]=e(P(a).trim())}),new r(n)}}};Qt.operators={sup:",",sub:":"};var Xt=Qt;const Vt=class extends w{constructor(t,e,r=!1){super(),this.context=t,this.name=e,this.backticks=r}getEval(t=null,e=null){var r=t,n=this.name;return this.context&&(n instanceof g&&(n=n.eval(t,e)),r=this.context.eval(t,e)),{context:r,name:n}}eval(t=null,e=null){var r=this.getEval(t,e);if(!Object(_.a)(r.context)&&!Object(_.a)(r.name))return Object(H.a)(e)?e(this,r.context,r.name):D.create(r.context).get(r.name)}toString(t=null){var e=this.name;if(this.context){var r=this.context.toString(t);e instanceof g?e="["+e.toString(t)+"]":this.backticks&&(e="`"+e+"`")}else{r=t;this.backticks&&(e="`"+e+"`")}return(r||"")+(r&&!e.startsWith("[")?Vt.separator:"")+e}static parse(t,e,r=Vt){if(!L.match(t.trim(),[" "]).length){var n,a,s=L.split(t,[]),i=s.pop(),o=L.split(i.trim(),[r.separator],{preserveDelims:!0});if(o.length>1&&(i=o.pop().substr(1),s=s.concat(o)),q(i,"`","`")&&(i=z(i,"`","`"),a=!0),s.length&&((n=e(s.join(""))).isContext=!0),q(i,"[","]")){if(!n)throw new Error("Invalid reference: "+t+"!");i=e(z(i,"[","]"))}return new r(n,i,a)}}};Vt.separator=".";var Jt=Vt;const Zt=class extends g{};Object.defineProperty(Zt.prototype,"jsenType",{get:()=>"ReturnDirective"});var Gt=Zt;const te=class extends Gt{constructor(t){super(),this.expr=t}eval(t=null,e=null){return this.expr?this.expr.eval(t,e):void 0}toString(t=null){return this.expr?"return "+this.expr.toString(t):"return"}static parse(t,e,r=te){var n=t.toLowerCase();if(n.startsWith("return ")||"return"===n)return new r(e(t.substr(6).trim()))}};var ee=te;const re=class extends g{};Object.defineProperty(re.prototype,"jsenType",{get:()=>"Statements"});var ne=re;const ae=class extends ne{constructor(t,e){super(),this.stmts=exprs,this.delim=e}eval(t=null,e=null){for(var r=[],n=0;n<this.stmts.length;n++){if(this.stmts[n]instanceof Gt)return this.stmts[n].eval(t,e);r[n]=this.stmts[n].eval(t,e)}return r}toString(t=null){return this.stmts.map(e=>e.toString(t)).join(this.delim)}static parse(t,e,r=ae){var n=L.lex(t,Object(A.a)(r.operators));if(n.tokens.length>1)return new r(n.tokens.map(t=>e(t)),n.matches[0].trim())}};ae.operators=[";","\r\n"];var se=ae;const ie=class extends g{};Object.defineProperty(ie.prototype,"jsenType",{get:()=>"StringType"});var oe=ie;const le=class extends oe{constructor(t,e){super(),this.expr=t,this.quote=e}eval(){return this.expr}toString(){return this.quote+this.expr+this.quote}static parse(t,e,r=le){if(t=t.trim(),(q(t,'"','"')||q(t,"'","'"))&&!L.match(t,[" "]).length){var n=q(t,'"','"')?'"':"'";return new r(z(t,n,n),n)}}};var ce=le;k.grammars={Comments:jt,Return:ee,Statements:se,Deletion:Pt,Assignment:ct,Func:Ft,Abstraction:Q,Condition:At,Assertion:ot,Comparison:Et,Math:qt,Arr:Z,Obj:Xt,Num:Yt,Str:ce,Bool:ft,Call:bt,Reference:Jt};var he=k,pe=r(29),ue=r(25),fe=r(28);const de=class{constructor(t,e,r=null){this.key=t,this.value=e,this.flag=r}toString(t=null){return this.key+": "+this.value+(this.flag?" "+this.flag:"")}static parse(t,e={}){if(t){var r=Object(Tt.a)(e);r.limit=1;var n=L.split(t,[":"],r);if(n.length<2)throw new Error("Malformed def: "+t);var a,s,i=n.shift().trim(),o=L.split(n.shift().trim(),[" "],e);return o.length>1&&de.flags.includes(P(o).trim().toLowerCase())&&(s=o.pop().trim().toLowerCase()),a=o.join(" "),new de(i,a,s)}}};de.flags=["!replace","!incase"];var me=de;const be=class{constructor(t=[]){this.entries=[],t.forEach(t=>this.add(t))}filter(t=!1,e=!1){return this.entries.filter(r=>(!r.isDuplicate||t)&&(!r.overridden||e))}toString(t=null,e=!1,r=!0){return this.filter(e,r).map(e=>e.toString(t)).join("; ")+";"}add(t){if(!t.key||!t.value)throw new Error("Def must contain a valid key and value!");return t instanceof me||(t=new me(t.key,t.value,t.flag)),this.entries.forEach(e=>{if(!e.isDuplicate&&!e.overridden){var r=e.key.toString(),n=e.value.toString(),a=q(n,"(",")")?z(n,"(",")"):n,s=t.key.toString(),i=t.value.toString(),o=q(i,"(",")")?z(i,"(",")"):i,l="!incase"===(e.flag||"").toLowerCase(),c="!replace"===(e.flag||"").toLowerCase(),h="!incase"===(t.flag||"").toLowerCase(),p="!replace"===(t.flag||"").toLowerCase();r===s&&(n!==i&&a!==o||c!==p&&l!==h?p||l?e.overridden=!0:(c||h)&&(t.overridden=!0):t.isDuplicate=!0)}}),this.entries.push(t),this}static parse(t,e={}){return new be(L.split(t,[";"],e).filter(t=>t.trim()).map(t=>me.parse(t.trim())))}};var ge=be;const ve=class{constructor(t={}){this.block={},this.apply(t)}toString(t=null,e=!1,r=!0){var n=[];return Object(yt.a)(this.block,(a,s)=>{n.push("@"+a),n.push("{"+s.toString(t,e,r)+"}")}),n.join(" ")}apply(t){var e=t;if(t instanceof ve)e=t.block;else if(!Object(i.a)(t))throw new Error("Argument #1 must only be an object or an instance of ./DefSheet!");return Object(yt.a)(e,(t,e)=>{this.applyTo(t,e)}),this}applyTo(t,e){var r=e;if(e instanceof ge)r=e.entries;else if(!Object(d.a)(e))throw new Error("Argument #1 must only be an array or an instance of ./DefBlock!");return this.block[t]||(this.block[t]=new ge),r.forEach(e=>this.block[t].add(Object(Tt.a)(e))),this}static parse(t,e={}){for(var r,n,a=L.split(t,[],e),s={};(r=a.shift())&&(n=a.shift());)s[r.trim().toLowerCase().substr(1)]=ge.parse(z(n.trim(),"{","}"),e);return new ve(s)}};var Oe=ve;const je=class extends fe.b{constructor(t,e={}){if(super({},e),this.root=this.el=t,"#document"===t.nodeName)this.el=t.querySelector("html");else if(!(t instanceof HTMLElement))throw new Error("Argument #1 must be instanceof of HTMLElement or the document object!");this.$.ns=je.parseNamespace(this.el),this.$.defs=je.parseCascadedDefSheet(this.el),this.init()}init(){this.free(!1),this.getCpsBlock("init",!0).forEach(t=>t.eval(this)),this.$.bindingsListeners=[];return this.getCpsBlock("directives",!0).forEach(t=>{this.$.params.observeOnly||t.eval(this);var e,r=this.observe((e=t.meta.vars,Object(nt.a)(e.map(t=>a(a(t.toString(),"["),"(")))),(e,r,n)=>{var a=t.eval(this);if(!1!==a)return a},{diff:this.$.params.diff});this.$.bindingsListeners.push(r)}),this}free(t=!0){return t?super.removeListener():this.$.bindingsListeners&&(this.$.bindingsListeners.forEach(t=>t.remove()),this.$.bindingsListeners.splice()),this}clone(t=!0){if(!Object(H.a)(this.$.params.componentCallback))throw new Error("The params.componentCallback function is required!");var e,r=this.el.cloneNode(!0),n={};je.paramsAttrs.map(t=>je.attributeMap[t]).forEach(t=>{var e;(e=r.getAttribute(t))&&(n.type=e,r.removeAttribute(t))}),(e=Object(s.a)(r.children).filter(t=>t.matches(je.elementMap.defsheet))[0])&&e.remove();var a=this.$.params.componentCallback(r,this.$.params,!1);return(Object(ue.a)(a)?Object(pe.a)(a):a).$defs=Oe.parse(this.$.defs.toString(null,!t,!0)),Object(yt.a)(n,(t,e)=>{r.setAttribute(t,e)}),e&&r.prepend(e),a}getCpsBlock(t,e=!1){var r=this.$.defs.block[t]?this.$.defs.block[t].filter():[];if(e){var n=[];return r.forEach(t=>{var e=(!1!==this.$.params.chainableDirectives&&t.value.trim().startsWith("(")?L.split(t.value,["."]):[t.value]).map(t=>he.parse(t,[rt],{assert:!1})||he.parse(t));if(e.length===e.filter(t=>t).length){var r,a=t.key+(e.length>1||e[0]instanceof tt?e.join("."):"("+e[0].toString()+")");(r=he.parse(a,null,{explain:this.$.params.explainJsen}))?n.push(r):this.error("Malformed CPS expression: "+t.toString())}else this.error("Malformed argument in the CPS expression: "+t.toString())}),n}return r}getRelatedNode(t){var e,r;if(this.computedRelated||(this.computedRelated={},this.getCpsBlock("related",!1).forEach(t=>{this.computedRelated[t.key]=he.parse(t.value)})),(e=this.computedRelated[t])&&(r=e.eval(this))){if(Object(H.a)(r)&&(r=r(this.el,t),!(Object(S.a)(r)||r instanceof HTMLElement)))throw new Error('The callback for node "'+t+'" returned an invalid type.');if(Object(S.a)(r)&&(r=je.toElement(r)),!(r instanceof HTMLElement))throw new Error('"'+t+'" could not be resolved to a valid node instance.');return r}}getExplicitNode(t){if(this.$.roles&&this.$.roles.length||(this.$.roles=(this.el.getAttribute(je.attributeMap.superrole)||"").replace("  "," ").split(" ")).length)return(this.$.params.rolecase?[this.$.params.rolecase]:this.$.roles).reduce((e,r)=>{if(!e){var n,a,s="["+CSS.escape(je.attributeMap.superrole)+'~="'+r+'"]',i="["+CSS.escape(je.attributeMap.subrole)+'~="'+r+"-"+t+'"]';(a=(this.el.shadowRoot||this.el).querySelector(i))&&(this.el.shadowRoot&&(!a.parentNode.closest||!a.parentNode.closest(s))||!this.el.shadowRoot&&a.parentNode&&(n=a.parentNode.closest(s))&&n.isSameNode(this.el))&&(e=a)}return e},null)}getImplicitNode(t){if(!t.match(/[^a-zA-Z0-9\-]/)){var e=[];je.schema.aria[t]?e.push({schema:je.schema.aria[t],selector:['[role="'+t+'"]']}):e.push({schema:je.schema.std[t]||je.schema.aria[t],selector:[t,'[role="'+t+'"]']}),Object(yt.a)(je.schema.std,(r,n)=>{n.implicitRole===t&&e.push({schema:n,selector:[r]})});var r=null;return e.forEach(t=>{(this.el.shadowRoot||this.el).querySelectorAll(t.selector.join(",")).forEach(e=>{je.schema.assertNodeBelongsInScopeAs(this.el,e,t.schema)&&(t.schema&&t.schema.singleton?r=e:r&&!Object(d.a)(r)||(r=r||[]).push(e))})}),r}}createNode(t,e){var r=e;if(this.$.params.drilldown){if(e===this.root||e===this.el)e=this;else if(e){if(!Object(H.a)(this.$.params.componentCallback))throw new Error("The params.componentCallback function is required!");var n=Object(Tt.a)(this.$.params);n.alias=t,e=Object(d.a)(e)?e.map(t=>this.$.params.componentCallback(t,n,!0)):this.$.params.componentCallback(e,n,!0)}}else Object(H.a)(this.$.params.nodeCallback)&&(e=Object(d.a)(e)?e.map(t=>this.$.params.nodeCallback(t)):this.$.params.nodeCallback(e));return this.set(t,e),r&&r!==this.root&&r!==this.el&&!Object(d.a)(r)&&je.disconnectedCallback(r,()=>{this.del(t)}),e}get(t){var e,r=this.asOwnMethod(t);return r||("_"===t?this.getOffsetParent():"root"===t&&(e=this.root)||"el"===t&&(e=this.el)?Object(H.a)(this.$.params.nodeCallback)?this.$.params.nodeCallback(e):e:(t in this.$.state||((e=this.getRelatedNode(t))||!this.$.params.implicitOnly&&(e=this.getExplicitNode(t))||!this.$.params.explicitOnly&&(e=this.getImplicitNode(t)))&&this.createNode(t,e),this.$.state[t]))}static parseNamespace(t){var e={roadmap:t.getAttribute(je.attributeMap.ns)};return e.roadmap&&(e.namespace=a(e.roadmap,"//"),e.subnamespace=B(e.roadmap,"//"),e.subnamespace.startsWith("/")&&(e.subnamespace=B(e.subnamespace,"/")),e.subnamespace.endsWith("//")&&-1===e.subnamespace.indexOf("///")&&(e.subnamespace=e.subnamespace+e.namespace+"//")),e}static parseCascadedDefSheet(t){var e,r,n,a;return(e=Object(s.a)(t.children).filter(t=>t.matches(je.elementMap.defsheet))[0])&&(r=Oe.parse((e.textContent||"").trim()))||(r=new Oe),je.paramsAttrs.forEach(e=>{(n=t.getAttribute(je.attributeMap[e]))&&(a=ge.parse(n))&&r.applyTo(e,a)}),r}static recompose(t,e){if(t.matches(je.elementMap.import)){e=e.cloneNode(!0);var r=t.getAttribute(je.attributeMap.ns),n=e.getAttribute(je.attributeMap.ns),a=(e.getAttribute(je.attributeMap.superrole)||"").split(" ").map(t=>t.trim());return e.setAttribute(je.attributeMap.ns,r),je.recomposeDefs(e,t,"append"),Object(s.a)((t.shadowRoot||t).children).forEach((t,s)=>{if(!t.matches(je.elementMap.defsheet)){t=t.cloneNode(!0);var i=[],o=[];if((t.getAttribute(je.attributeMap.subrole)||"").split(" ").map(t=>t.trim()).forEach(t=>{var e=a.filter(e=>t.startsWith(e+"-"));e.length&&(i.push(e[0]),o.push(t))}),i.length){var l,c=i.map(t=>"["+CSS.escape(je.attributeMap.superrole)+'~="'+t+'"]'),h=o.map(t=>"["+CSS.escape(je.attributeMap.subrole)+'~="'+t+'"]');if(!(e.shadowRoot&&(l=e.shadowRoot.querySelectorAll(h))||1===(l=e.querySelectorAll(h)).length&&l[0].closest(c)===e))throw new Error("Composition Error: Node #"+s+" (at "+r+") must match exactly one targetNode in "+n+"! ("+l.length+" matched)");je.recomposeDefs(t,l[0],"prepend"),l[0].replaceWith(t)}else e.append(t)}}),e}return je.recomposeDefs(t,e,"prepend"),t}static recomposeDefs(t,e,r,n=[]){if(n=n.concat([je.attributeMap.ns,...je.attributeMap.nocompose]),t.hasAttribute("norecompose")&&(n=n.concat((t.getAttribute("norecompose")||"*").split(" ").map(t=>t.trim()))),Object(H.a)(je.recomposeCallback)){var a=je.recomposeCallback(t,e,r,n);if(!1===a)return!1;(Object(S.a)(a)||Object(d.a)(a))&&(n=n.concat(a))}Object(nt.a)([je.attributeMap.superrole,je.attributeMap.subrole,"role","class"]).forEach(a=>{var s,i;if(!n.includes(a)&&!n.includes("*")&&(s=e.getAttribute(a))){if(i=t.getAttribute(a))var o="prepend"===r?[s,i]:[i,s];else o=[s];t.setAttribute(a,Object(nt.a)(o.join(" ").split(" ").map(t=>t.trim())).join(" ")),n.push(a)}}),je.paramsAttrs.map(t=>je.attributeMap[t]).concat("style").forEach(a=>{var s,i;if(!n.includes(a)&&!n.includes("*")&&(s=e.getAttribute(a))){if(i=t.getAttribute(a))(o="prepend"===r?[s,i]:[i,s])[0].trim().endsWith(";")||(o[0]=o[0]+";");else var o=[s];t.setAttribute(a,o.join(" ")),n.push(a)}});for(var i=0;i<e.attributes.length;i++){var o=e.attributes[i];n.includes(o.name)||n.includes("*")||t.hasAttribute(o.name)||(t.setAttribute(o.name,o.value),n.push(o.name))}if(!n.includes("@cps")&&!n.includes("*")){var l=Object(s.a)((t.shadowRoot||t).children).filter(t=>t.matches(je.elementMap.defsheet)),c=Object(s.a)((e.shadowRoot||e).children).filter(t=>t.matches(je.elementMap.defsheet));c.length&&(l.length?l[0][r](c[0].textContent):t.prepend(c[0].cloneNode(!0)))}return!0}static toElement(t){if(je.ctxt.document){var e;if(t.trim().startsWith("<")){var r=je.ctxt.document.createElement("div");r.innerHtml=t,e=r.firstChild}else e=je.ctxt.document.querySelector(t);return e}}static disconnectedCallback(t,e){if(t.parentNode){var r=!1;new MutationObserver(n=>{n.forEach(n=>{!r&&Object(s.a)(n.removedNodes).includes(t)&&(r=!0,e())})}).observe(t.parentNode,{childList:!0}),je.disconnectedCallback(t.parentNode,()=>{r||(r=!0,e())})}}};je.ctxt={},je.schema=h,je.elementMap={defsheet:'script[type="text/jsen-p"]',bundle:"chtml-bundle",import:"chtml-import"},je.attributeMap={related:"chtml-related",directives:"chtml-directives",ns:"chtml-ns",superrole:"chtml-role",subrole:"chtml-role",nocompose:["nocompose","shadow"]},je.paramsAttrs=["related","directives"];var we=je,ye=(r(14),r(27)),xe=r(21);r(35);const $e=class extends we{constructor(t,e={}){super(t,Object(n.a)({},e,$e.params)),this.observe(this.$.params.dataKey,(t,e)=>{!this.$.ns.subnamespace||Object(S.a)(t)||Object(ye.a)(t)||Object(_.a)(t)||(this.populate(t,this.$.ns.subnamespace,this.$.params.itemCallback),Object(xe.a)(t)&&t.observe(e=>{this.populate(t,this.$.ns.subnamespace,this.$.params.itemCallback,Object.keys(e))}))})}bind(t){return this.set(this.$.params.dataKey,t),this}populate(t,e,r=null,n=[]){Object(xe.a)(t)&&!Object(ue.a)(t)&&(t=t.proxy()),(arguments.length>3?n:Object.keys(t)).forEach(n=>{n=Object(dt.a)(n)?parseInt(n):n;var a=this.has(n)?this.get(n):null;if(Object(_.a)(t[n])){if(a)if(Object(H.a)(r)){var s=r(a,!1,n);"Promise"in we.ctxt&&s instanceof we.ctxt.Promise?s.then(()=>{a.el.remove()}).catch(()=>{a.el.remove()}):a.el.remove()}else a.free(),a.el.remove()}else{var i=!1;if(!a){var o=e.split("//");o[0]+="/"+n;var l=$e.import(o.join("//"));if(l){var c=function(t,e,r=!1,n=!1,a=!1){if(-1===t.indexOf(e))return r?[]:void 0;var s=!0===r?t.length-1:!1===r?1:r,i=a?t.lastIndexOf(e)+1:t.indexOf(e)+1,o=Object(_.a)(e)?[]:t.slice(i,i+s);return n&&o.length<s&&o.length<t.length&&(o=o.concat(t.slice(0,s-o.length))),r?o:o[0]}(Object.keys(t),n+"",!0).reduce((t,e)=>t||(this.has(e)?this.get(e):null),null);c?c.el.before(l):this.el.append(l),a=this.createNode(n,l),i=!0}}a&&(Object(H.a)(r)?r(a,t[n],n,i):a.bind(t[n]))}})}static from(t,e={},r=!0,n=$e){var s=t;if(Object(S.a)(t)&&!t.trim().startsWith("<")&&-1!==t.indexOf("/")){if(!we.bundles||!(s=$e.import(a(t,"//"))))throw new Error('No element found on the namespace "'+t+'"!')}else{if(Object(S.a)(t)&&!(s=we.toElement(t)))throw new Error('Could not resolve the string "'+t+'" to an element!');if(r&&we.bundles){var i,o,l,c=s.matches(we.elementMap.import);if((i=a(s.getAttribute(we.attributeMap.ns)||"","//"))&&(c&&(o=i)||(o=I(i,"/"))&&o.indexOf("/")>-1)&&(l=$e.import(o))){var h=s;s=we.recompose(s,l),c&&h.replaceWith(s)}else i&&console.warn("Namespace resolution failed: "+i)}}return new n(s,e)}static import(t){return we.bundles.find(t)}};$e.params={diff:!0,dataKey:"$",drilldown:!1,nodeCallback:null,componentCallback:$e.from,observeOnly:!1};var Ce=$e;we.ctxt=window;var Ee=new Promise(t=>{"complete"!==document.readyState?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):t()});we.ready=(t,e=!0)=>{Ee.then(()=>{e?we.initObj.loadingBundlesPromise.then(t):t()})},Ee.then(()=>{var t,e,r,n,a;we.initObj=(t=Object(s.a)(document.querySelectorAll('template[is="'+we.elementMap.bundle+'"]')).reverse(),e=t.filter(t=>t.hasAttribute("src")&&!t.content.children.length),r=e.map(t=>new Promise(e=>{t.addEventListener("bundleloadsuccess",e),t.addEventListener("bundleloaderror",e)})),n=Promise.all(r).then(()=>{r.splice(0)}),{contentLoadedPromise:Ee,loadingBundlesPromise:n,bundles:t,remoteBundles:e,loadingBundles:r});var i=[];we.bundles=new u(we.initObj.bundles,[],(t,e,r,n)=>{we.initObj.loadingBundles.length&&!a&&(a=!0,console.warn("Remote bundles are still loading at this time! You should probabbly wrap bundle-dependent code within Chtml.ready(callback[, true/*waitForBundles*/])."));var s=e.join("/");if(i.includes(s))return we.bundles.find(e.slice(0,-1).join("/"));i.push(s);var o=t.content.querySelector("["+CSS.escape(we.attributeMap.ns)+'="'+s+'"]');if(o&&r){try{var l=[];t.hasAttribute("norecompose")&&(l=(t.getAttribute("norecompose")||"*").split(" ").map(t=>t.trim())),o=we.recompose(o,r,"prepend",l)}catch(t){console.error("[Inheritance error at source #"+n+"]: "+t.message)}return i.pop(),o}return i.pop(),o?o.cloneNode(!0):r?r.cloneNode(!0):null})}),customElements.define(we.elementMap.bundle,class extends HTMLTemplateElement{attributeChangedCallback(t,e,r){r&&this.load()}load(){var t=this.getAttribute("src");t&&this.content.children.length?console.warn("A CHTML bundle must define only either a remote content or local content! Bundle ignored."):t&&fetch(t).then(t=>t.ok?t.text():Promise.reject(t.statusText)).then(t=>{this.innerHTML=t,this.dispatchEvent(new Event("bundleloadsuccess"))}).catch(e=>{console.warn("Error fetching the bundle at "+t+". ("+e+")"),this.dispatchEvent(new Event("bundleloaderror"))})}static get observedAttributes(){return["src"]}},{extends:"template"}),customElements.define(we.elementMap.import,class extends HTMLElement{shouldResolve(){return!this.hasAttribute("ondemand")&&!this.closest("template")&&!this.closest(we.elementMap.import+"[ondemand]")}connectedCallback(){this.processed=!1,this.shouldResolve()&&this.resolve()}attributeChangedCallback(t,e,r){this.shouldResolve()&&this.resolve()}resolve(){Ce.ready(()=>{if(!this.parentNode)return!1;var t,e,r=we.attributeMap.ns;if((e=a(this.getAttribute(r)||"","//"))&&e!==this.__namespace)if(this.__namespace=e,t=Ce.import(e)){var n=we.recompose(this,t);this.hasAttribute("shadow")?(this.parentNode.shadowRoot||this.parentNode.attachShadow({mode:"open"}),this.parentNode.shadowRoot.append(n),this.remove()):this.replaceWith(n)}else this.innnerText='No element found on the namespace "'+e+'"!'})}static get observedAttributes(){return["ondemand",we.attributeMap.ns]}});var ke=Ce,Se=r(36),_e=r(22);const Ae=class extends ke{static from(t,e={},r=!0,n=Ae){return super.from(t,e,r,n)}constructor(t,e={}){super(t,Object(n.a)({},e,Ae.params))}use(t,...e){return this.useAs(t,"$"+t,...e)}useAs(t,e,...r){var n=_e.a.use(t,...r);return this.set(e,n),n}};Ae.params.drilldown=!0,Ae.params.observeOnly=!1,Ae.params.nodeCallback=t=>new Se.a(t),Ae.params.componentCallback=Ae.from;e.a=Ae},function(t,e,r){"use strict";var n=r(4),a=r(1),s=r(11),i=r(12),o=r(22);const l=class extends o.a{constructor(t={},e={}){super(t,e);var r=(t,e=null)=>((t=Object(s.a)(t,c)).path=l.parsePath(t.pathname),t.query=l.parseQuery(t.search),e?Object(i.a)(t,"state",e):t);window.addEventListener("popstate",t=>{setTimeout(()=>{this.set(r(document.location,window.history.state))},0)}),this.get("href")||this.set(r(document.location)),!this.get("state")&&window.history&&this.set("state",window.history.state),window.addEventListener("click",t=>{var e,r;(t.preventDefault(),(e=t.target.closest("a"))&&(r=e.getAttribute("href")))&&(this.route(r,null,e.getAttribute("target")).defaultPrevented&&t.preventDefault())})}route(t,e=null,r=null){var n=l.parseUrl(t);Object(a.a)(e)||(e=window.history.state);var s=this.set(Object(i.a)(Object(i.a)(n,"state",e),"target",r));return n.href===document.location.href?window.history.replaceState(e,"",t):window.history.pushState(e,"",t),s instanceof Promise&&s.catch(()=>{this.back()}),s}update(t){return window.history.replaceState(t,"",document.location),this.set("data",t)}forward(){window.history.forward()}back(){window.history.back()}go(t){window.history.go(t)}matches(t){var e=l.parseUrl(t);return(this.get("href")+"/").startsWith(e.href.endsWith("/")?e.href:e.href+"/")}static parseUrl(t){var e=document.createElement("a");e.href=t;var r=c.reduce((t,r)=>Object(i.a)(t,r,e[r]),{});return r.path=l.parsePath(r.pathname),r.query=l.parseQuery(r.search),r}static parsePath(t){var e=t.split("/").filter(t=>t),r="/"===t?t:"/"+e.join("/")+"/",a=function(t,e,r=null){for(var a=[],s=t.length,i=0;i<s;i++)a.push({index:i,value:r?r(t[i]):t[i]});return a.sort((function(t,e){return Object(n.a)(t.value)&&"".localeCompare?t.value.localeCompare(e.value):t.value===e.value?0:t.value>e.value?1:-1})),"desc"===(e||"").trim().toLowerCase()&&(a=a.reverse()),a.map(e=>t[e.index])}(Object.keys(l.pathnaming),"desc").reduce((t,e)=>t||(r.startsWith("/"===e?e:"/"+e.split("/").filter(t=>t).join("/")+"/")?l.pathnaming[e]:null),null),s=e.reduce((t,e,r)=>a[r]?Object(i.a)(t,a[r],e):t,{});return{str:r,arr:e,obj:s}}static parseQuery(t){return(t.startsWith("?")?t.substr(1):t).split("&").map(t=>t.split("=").map(t=>t.trim())).reduce((t,e)=>Object(i.a)(t,e[0],e[1]),{})}},c=["hash","host","hostname","href","origin","pathname","port","protocol","search"];l.pathnaming={"/":["controller","resourceType","resourceId","action"]};e.a=l},function(t,e,r){"use strict";r(1);var n=r(5),a=r(11),s=r(0),i=r(13),o=r(22),l=r(6),c=r(2),h=r(37);const p=class extends o.a{select(t){return this.filterCallback((e,r)=>new RegExp(e).test(t),(t,e)=>e.active(!0),(t,e)=>e.active(!1))}filterCallback(t,e,r){var n={},a={};return Object(l.a)(this.getFrames(),(e,r)=>{t(e,r)?n[e]=r:a[e]=r}),Object(l.a)(n,e),Object(l.a)(a,r),n}getFrames(){var t={};return this.keys().forEach(e=>{this.get(e)instanceof d&&(t[e]=this.get(e))}),t}static create(t){var e={};return Object(l.a)(t,(t,r)=>{e[t]=r instanceof d?r:Object(h.a)(r)?new r:Object(c.a)(r)?r(match):new d(r||{})}),new p(e)}};var u=p;const f=class extends o.a{constructor(t={},e={}){!t.children||t.children instanceof u||((t=Object(a.a)(0,t)).children=u.create(t.children)),super(t,e);var r=o.a.use("router"),l=this.get("routePathSlot")||0;const c=(t,e)=>{if(t&&e){var r=Object(n.a)(l)?e.arr[l]:e.obj[l],a=(o=t.select(r),Object(s.a)(o)?Object(i.a)(o):o[Object.keys(o)[0]]);return this.set({activeChild:a,hasActiveChild:!!a})}return this.set({activeChild:void 0,hasActiveChild:!1});var o};r.observe("path",t=>c(this.get("children"),t),{diff:!0}),this.observe("children",(t,e,n)=>{if((!n.bubbling||!n.bubbling.filter(t=>t.split(".").length>2).length)&&(n.entries.length||n.exits.length))return c(t,r.get("path"))},{allowBubbling:!0,diff:!0}),this.observe(["activeChild","active"],e=>{if(e[0])return e[0].active(t[1])},{diff:!0})}active(t=!0){return this.set("active",t)}};var d=e.a=f},function(t,e,r){"use strict";r.r(e);var n=r(38),a=r(22),s=r(36),i=r(39),o=r(40);a.a.register("router",i.a,!0),window.OnePhrase||(window.OnePhrase={}),window.OnePhrase.Rosewell={Chtml:n.a,Component:a.a,Element:s.a,Router:i.a,Frame:o.a}}]);
//# sourceMappingURL=main.js.map